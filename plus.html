<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD -current Changelog</title>
<meta name="description" content="OpenBSD -current changes">
<meta name="copyright" content="This document copyright 1996-2016 by OpenBSD.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/plus.html">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<h2>
<a href="index.html">
<font color="#0000ff"><i>Open</i></font><font color="#000084">BSD</font></a>
<font color="#e00000">-current Changelog</font>
</h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="mail.html#Archives">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<br>
<a href="plus54.html">5.4</a>,
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>,
<a href="plus59.html">5.9</a>,
<a href="plus60.html">6.0</a>,
<a href="plus61.html">6.1</a>,
<a href="plus62.html">6.2</a>,
<a href="plus63.html">6.3</a>,
<a href="plus64.html">6.4</a>.
<br>

<p>
<h3><font color="#0000e0">Changes made between OpenBSD 6.4 and -current</font></h3>
<p>

<ul>
<!-- 2019/01/21 -->
<li>Adjusted <a href="https://man.openbsd.org/bgpd">bgpd(8)</a> to use Adj-RIB-Out to push UPDATE messages to peers, improving memory usage.
<li>Improved handling of two SMM-related MSRs in <a href="https://man.openbsd.org/vmm">vmm(4)</a>.
<!-- 2019/01/20 -->
<li>Adjusted mac filters to allow viewing vlan traffic and arp requests on vlans in <a href="https://man.openbsd.org/ixl">ixl(4)</a>.
<li>Added refresh for <a href="https://man.openbsd.org/arp">arp(8)</a> entries that are about to expire. 
<li>Added support in <a href="https://man.openbsd.org/bgpd">bgpd(8)</a> and <a href="https://man.openbsd.org/bgpctl">bgpctl(8)</a> for group descriptions in control messages that accept a neighbor description.
<li>Added support for ECDSA keys in PKCS#11 tokens.
<li>Added a -T option to test whether <a href="https://man.openbsd.org/ssh">ssh(1)</a> keys in an agent are usable.
<li>Imported xorgproto 2018.4.
<li>Added support for a new <a href="https://man.openbsd.org/kcov">kcov(4)</a> trace mode called KCOV_MODE_TRACE_CMP to trace comparison instructions and switch statements, usable during fuzzing to generate even more coverage.
<li>Set the shell to strip quotation marks from daemon_flags when starting a daemon with <a href="https://man.openbsd.org/rc.d>rc.d(8)</a>, making the details in pexp match what appears in the process list.
<li>Restored correct display of treasure when snake runs over the money in <a href="https://man.openbsd.org/snake">snake(6)</a>. Adjusted cursor location during space warp and display of the pinball bonus.
<li>Changed imsg header definitions to use standard types.
<!-- 2019/01/19 -->
<li>Fixed BN_is_prime_* calls in <a href="https://man.openbsd.org/crypto">libcrypto(3)</a>, <a href="https://man.openbsd.org/openssl">openssl(1)</a>, <a href="https://man.openbsd.org/ssh">ssh(1)</a> and <a href="https://man.openbsd.org/sshd">sshd(8)</a>.
<li>Handled link state change interrupts in <a href="https://man.openbsd.org/ixl">ixl(4)</a>.
<li>Serialized tc_windup() calls and modified some timehands.
<li>Committed refactored <a href="https://man.openbsd.org/ssh">ssh(1)</a> packet parsing API.
<li>Changes to <a href="https://man.openbsd.org/dhclient">dhclient(8)</a> now handle changes to SSID or LLADDR by retrieving a new lease. This mproves performance when join connects to new networks.
<li>Improved join error handling in<a href="https://man.openbsd.org/ifconfig">ifconfig(8)</a>.
<li>Added a pwraction <a href="https://man.openbsd.org/sysctl">sysctl(8)</a> that allows conversion of a power button into a sleep button if desired.
<li>Set an <a href="https://man.openbsd.org/ssh>ssh(1)</a> password prompt to begin with a carriage return to obscure portions of a password entered too early.
<li>Enabled <a href="https://man.openbsd.org/myx">myx(4)</a> on the large ramdisk for amd64. 
<li>Finished randomizing remaining layers of pmap_kernel.
<li>Enabled <a href="https://man.openbsd.org/ixl">ixl(4)</a> on amd64.
<li>Added a TLS record handling implementation. 
<li>Moved boottime into the timehands.
<li>Added a partial port of EC_KEY_METHOD from OpenSSL 1.1 to libcrypto. Added various apis from OpenSSL 1.1 to LibreSSL.
<!-- 2019/01/18 -->
<li>Set removal of a currently active network from the join list to disconnect as well. 
<li>Added "join any" option to allow users to automatically connect via join() to any open wifi network. Known networks are preferred.
<li>Increased the socket buffer size for <a href="https://man.openbsd.org/sendsyslog">sendsyslog(2)</a> to 1 MB for fewer messages dropped by <a href="https://man.openbsd.org/syslogd">syslogd(8)</a>.
<li>Updated to libpixman 0.36.0 in xenocara.
<li>Added protective check for negative length integers in nfs clients and servers, as well as negative length NFS strings.
<li>Reconnected bfd(4) to the build after updating for sounlock() api change.
<li>Set <a href="https://man.openbsd.org/dhclient">dhclient(8)</a> to ignore HUP signals. Starting a new dhclient will handle this use case by killing and executing a new copy.
<li>Began validating relative timeout before sleeping for <a href="https://man.openbsd.org/futex">futex(2)</a>.
<li>Began validating inputs to <a href="https://man.openbsd.org/adjtime">adjtime(2)</a>, <a href="https://man.openbsd.org/settimeofday">settimeofday(2)</a> and <a href="https://man.openbsd.org/clock_settime">clock_settime(2)</a>.
<li>Changed the default digest type to sha256 for <a href="https://man.openbsd.org/openssl">openssl(1)</a>. Added support for pbkdf2 with OpenSSL-compatible flags.
<li>Removed <a href="https://man.openbsd.org/vmm">vmm(4)</a> and disabled <a href="https://man.openbsd.org/vmd">vmd(8)</a> and <a href="https://man.openbsd.org/vmctl">vmctl(8)</a> for i386 systems. 
<!-- 2019/01/17 -->
<li>Renamed TLS extension-handling functions to better fit TLSv1.3.
<li>Enabled use of a 64-bit register when required for inline assembly on sparc64, correcting sparc64 kernels compiled with <a href="https://man.openbsd.org/clang">clang(1)</a>.
<li>Continued work to prepare the network stack for fine-grained locking.
<li>Added support for the SSD1306 OLED display. 
<li>Modified <a href="https://man.openbsd.org/signify">signify(1)</a> and <a href"https://man.openbsd.org/doas">doas(1)</a> to prevent passwords from being retained in memory when errors are encountered.
<li>Prevented users from specifying multiple join or nwid arguments in one <a href="https://man.openbsd.org/ifconfig">ifconfig(8)</a> call.
<li>Fixed crash conditions in <a href="https://man.openbsd.org/unveil">unveil(2)</a>, along with some cases where unveil would return ENOENT instead of EACCESS. 
<li>Enabled <a href="https://man.openbsd.org/bwfm">bwfm(4)</a> in RAMDISK_CD for amd64, allowing use during installs.
<li>Laid groundwork for TLSv1.3.
<!-- 2019/01/16 -->
<li>Added a -h flag to <a href="https://man.openbsd.org/sftp">sftp(1)</a> <a href="https://man.openbsd.org/chown">chown(8)</a>, <a href="https://man.openbsd.org/chgrp"	>chgrp(1)</a>, and <a href="https://man.openbsd.org/chmod">chmod(1)</a> commands to request they not follow symlinks.   
<li>Added support for a "lsetstat@openssh.com" extension. This replicates the
functionality of the existing SSH2_FXP_SETSTAT operation but does not
follow symlinks. 
<li>Updated to exit <a href="https://man.openbsd.org/syspatch">syspatch(8)</a> correctly after updating itself. Improvement to readability of patches to install on first boot.
<!-- 2019/01/15 -->
<li>For external LSAs the type (1 or 2) is encoded in the metric field. Fixed a problem where <a href="https://man.openbsd.org/ospfd">ospfd(8)</a> and <a href="https://man.openbsd.org/ospf6d">ospf6d(8)</a> overwrite this information when "depend on" is used and the specified interface is down.
<li>Added Allwinner H3/H5 <a href="https://man.openbsd.org/ohci">ohci(4)</a> clocks.
<li>Repaired inter-word spacing of postscript and pdf outputting by <a href="https://man.openbsd.org/mandoc">mandoc(1)</a>.
<li>Corrected setting of default colours in <a href="https://man.openbsd.org/tmux">tmux(1)</a>.
<li>"No data" frames will no longer be processed in <a href="https://man.openbsd.org/ieee80211_input">ieee80211_input(9)</a> before decryption and incorrectly counted as decryption failures.
<li>Characters that will not be copied are no longer highlightable in <a href="https://man.openbsd.org/tmux">tmux(1).</a>
<!-- 2019/01/14 -->
<li>Allowed programs to set the Checking Disabled flag on DNS requests.
<li>Prevented <a href="https://man.openbsd.org/ntpd">ntpd(8)</a> from starting when an instance is already running.
<li>Added support for building sparc64 kernels with <a href="https://man.openbsd.org/clang">clang(1)</a>.
<li>Fixed <a href="https://man.openbsd.org/mailq">mailq(8)</a> output for <a href="https://man.openbsd.org/smtpctl">smtpctl(8)</a>.
<li>Code review and clean up of <a href="https://man.openbsd.org/locate">locate(1)</a>.
<li>Fixed minor issues in <a href="https://man.openbsd.org/ksh">ksh(1)</a>.
<li>Modified <a href="https://man.openbsd.org/ttyflags">ttyflags(8)</a> to improve memory usage.
<li>Cleanup and improvement of <a href="https://man.openbsd.org/dhclient">dhclient(8).</a>
<!-- 2019/01/13 -->
<li>Redundant debug message removed for <a href="https://man.openbsd.org/iwn">iwn(4)</a>.
<li>Added support for <a href="https://man.openbsd.org/gpio">gpio(4)</a> bus and improved card detection on Octeon systems.
<li>Fixed an off-by-one error in pfkeyv2_sysctl_policydumper().
<li>Improved support for Broadcom trackpad mouse <a href="https://man.openbsd.org/ubcmtp">ubcmtp(4)</a> by validating interfaces and claiming them during *attach().
<li>Validated interfaces for if_ral passed to *match().
<li>Improved <a href="https://man.openbsd.org/syslog">syslog(3)</a> to support program names including "." and "_".
<li>Updated xf86-video-ati to 18.1.0.
<!-- 2019/01/12 -->
<li>Set <a href="https://man.openbsd.org/clang">clang(1)</a> to disable the correct performance options based on architecture. Clang now checks CPU architecture and not system architecture when setting protection flags.
<li>Enabled <a href="https://man.openbsd.org/uhci">uhci(4)</a> USB support for ARMv7.
<!-- 2019/01/11 -->
<li>Antiquated mincore(2) will not be needed and was removed, eliminating an interface that exposed physical machine information unnecessarily.
<li>Bug fixes for <a href="https://man.openbsd.org/otus">otus(4)</a> devices based on the Atheros AR9001U chipset.
<li>Changed <a href="https://man.openbsd.org/mandoc">mandoc(1)</a> html output to display tooltips using css exclusively.
<li>Clarified in documentation that OpenBSD ignores the LC_NUMERIC category as a safety practice, and outlined best practices for portable programs.
<li>Addition of the <a href="https://man.openbsd.org/imxsrc">imxsrc(4)</a> i.MX system reset controller driver, used to assert the reset pins for the PCIe controller, etc.
<!-- 2019/01/10 -->
<li>Bug fixes in <a href="https://man.openbsd.org/pfctl">pfctl(8)</a>.
<li>Added <a href="https://man.openbsd.org/abcrtc">abcrtc(4)</a> Abracon AB1805 real-time clock driver.
<li>Eliminated <a href="https://man.openbsd.org/alloca">alloca(3)</a> call from vioqcow2.c and replaced with <a href="https://man.openbsd.org/malloc">malloc(3)</a> to prevent known-location object placement by an attacker.
<li>Implemented Event()/Signal()/Wait() AML operations for <a href="https://man.openbsd.org/acpi">acpi(4)</a>.
<li>Improved the "not my pool" searching loop in <a href="https://man.openbsd.org/malloc">malloc(3)</a> and made the number of pools variable. Optimization of multi-threaded case by adjusting default number of pools to 8.
<li>Hacking on <a href="https://man.openbsd.org/virtio">virtio(4)</a>, including defines, bug fixing and pci device list.
<li>kern_time.c will not allow cancellation of ongoing <a href="https://man.openbsd.org/adjtime">adjtime(2)</a> until after full permission checks.
<li>Adjusted <a href="https://man.openbsd.org/nc">nc(1)</a> to use <a href="https://man.openbsd.org/memset">memset(3)</a> instead of <a href="https://man.openbsd.org/bzero">bzero(3)</a> for portability and POSIX compliance.
<li><a href="https://man.openbsd.org/pledge">Pledge(2)</a> and <a href="https://man.openbsd.org/unveil">unveil(2)</a> <a href="https://man.openbsd.org/unbound-anchor">unbound-anchor(8)</a>.
<li>Improved portability of <a href="https://man.openbsd.org/mandoc">mandoc(1)</a> to other operating systems. Improved html and css used for html generation.
<li>Prevented <a href="https://man.openbsd.org/radeondrm">radeondrm(4)</a> from using aperture memory to overlap the framebuffer.
<!-- 2019/01/09 -->
<li>Improved <a href="https://man.openbsd.org/ddb">ddb(4)</a> readability by printing right-aligned hex values.
<li>Fix for <a href="https://man.openbsd.org/rcs">rcs(1)</a> to allow correct lock resolution before expansion of keywords, so expansion can happen with the correct values and files don't show up as modified.
<li>Added the ability for arm64 efiboot to boot from partitions other than "a".
<li>Spleen font enabled in <a href="https://man.openbsd.org/man8/wsfontload.8">wsfontload(8)</a>, along with font selection logic to allow selecting larger fonts when available at runtime in <a href="https://man.openbsd.org/rasops">rasops(9)</a>.
<li>Implemented an if_enqueue handler for <a href="https://man.openbsd.org/vlan">vlan(4)</a>, bypassing the ifq handling for a performance improvement in particular configurations.
<!-- 2019/01/08 -->
<li>Disabled ret-protector and retpoline protections in the <a href="https://man.openbsd.org/clang">clang(1)</a> compiler to regain build performance.
<li>Adjusted <a href=https://man.openbsd.org/httpd>httpd(8)</a> to start when TLS is configured.
</ul>
<p>

</body>
</html>
