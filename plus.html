<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD -current Changelog</title>
<meta name="description" content="OpenBSD -current changes">
<meta name="copyright" content="This document copyright 1996-2016 by OpenBSD.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="http://www.openbsd.org/plus.html">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<h2>
<a href="index.html">
<font color="#0000ff"><i>Open</i></font><font color="#000084">BSD</font></a>
<font color="#e00000">-current Changelog</font>
</h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="mail.html#Archives">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<br>
<a href="plus54.html">5.4</a>,
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>,
<a href="plus59.html">5.9</a>.
<br>

<p>
<h3><font color="#0000e0">Changes made between OpenBSD 5.9 and -current</font></h3>
<p>

<ul>
<!-- 2016-03-15 -->
<li>In <a href="http://man.openbsd.org/npppd.8">npppd(8)</a>, transition to "Req-Sent" had been missing when RTA in "Opened". This caused a timer event leak.
<li>Update to tzdata2016b from ftp.iana.org.
<li>Allocate amap slots for a virtual memory range reserved with <a href="http://man.openbsd.org/sbrk.2">sbrk(2)</a> lazily. This avoids wasting kernel memory if the user process does not make use of the allocated memory.
<li>For amaps with only a few slots, allocate the slots via <a href="http://man.openbsd.org/pool.9">pool(9)</a>. This saves some memory and reduces kmem pressure.
<li><font color="#e00000">5.9 RELIABILITY FIX: Incorrect path processing in pledge_namei() could result in unexpectedprogram termination of <a href="http://man.openbsd.org/pledge.2">pledge(2)</a>'d programs.</font><br>A source code patch is available for <a href="errata59.html#003_pledge">5.9</a>.
<li><font color="#e00000">5.7, 5.8 and 5.9 SECURITY FIX: Insufficient checks in IPv6 socket binding and UDP IPv6 option processing allow a local user to send UDP packets with a source (IPv6 address + port) already reserved by another user.</font><br>A source code patch is available for <a href="errata57.html#024_in6bind">5.7</a>, <a href="errata58.html#012_in6bind">5.8</a> and <a href="errata59.html#002_in6bind">5.9</a>.
<li>In <a href="http://man.openbsd.org/puc.4">puc(4)</a>, add support for the Exar XR17V354 device.
<!-- 2016-03-14 -->
<li>Remove the legacy <a href="http://man.openbsd.org/OpenBSD-5.9/uiomovei.9">uiomovei(3)</a> function. It has been replaced by <a href="http://man.openbsd.org/uiomove.9">uiomove(9)</a>.
<li>In <a href="http://man.openbsd.org/ssh.1">ssh(1)</a>, unbreak authentication using lone certificate keys in ssh-agent (bz#2550).
<li>In <a href="http://man.openbsd.org/acpicpu.4">acpicpu(4)</a>, correct the value of SRT_ENDTAG: it was documented incorrectly in early ACPI specs.
<!-- 2016-03-13 -->
<li>In libfontconfig, enable atomics operations on mips64 and mips64el.
<li>In <a href="http://man.openbsd.org/vmm.4">vmm(4)</a>, introduce memory ranges to support VMs with 4G or more of RAM.
<li>In <a href="http://man.openbsd.org/ichiic.4">ichiic(4)</a>, ignore the SMBALERT# interrupt. This fixes booting the GENERIC kernel on ADI RCC-VE with buggy BIOS versions, rendering the internal eMMC flash unusable.
<li>In <a href="http://man.openbsd.org/kdump.1">kdump(1)</a>, recognize ipmi, vscsi, pvbus, udl, fuse, trunk, pipex and memrange <a href="http://man.openbsd.org/ioctl.2">ioctl(2)</a> requests.
<!-- 2016-03-11 -->
<li>In <a href="http://man.openbsd.org/sd.4">sd(4)</a>, avoid a kernel panic when unplugging an USB umass stick because of a use after free.
<li>Avoid corrupt mount points without a valid device when unmounting.
<!-- 2016-03-10 -->
<li><font color="#e00000">5.7, 5.8 and 5.9 SECURITY FIX: Lack of credential sanitization allows injection of commands to <a href="http://man.openbsd.org/xauth.1">xauth(1)</a>.</font><br>A source code patch is available for <a href="errata57.html#014_sshd">5.7</a>, <a href="errata58.html#011_sshd">5.8</a> and <a href="errata59.html#001_sshd">5.9</a>.
<li>In <a href="http://man.openbsd.org/ssh.1">ssh(1)</a>, sanitise characters destined for <a href="http://man.openbsd.org/xauth.1">xauth(1)</a>.
<li>In <a href="http://man.openbsd.org/isakmpd.8">isakmpd(8)</a>, don't retransmit responses for unauthenticated messages.
<!-- 2016-03-09 -->
<li>Remove support for vax.
<li>In <a href="http://man.openbsd.org/fdisk.8">fdisk(8)</a> and <a href="http://man.openbsd.org/pdisk.8">pdisk(8)</a>, accept only a character special device as disk.
<!-- 2016-03-08 -->
<li>Rework how <a href="http://man.openbsd.org/mpw.4">mpw(4)</a> interacts with <a href="http://man.openbsd.org/vlan.4">vlan(4)</a>. This will allow vlan(4) to become MP-safe.
<li>In <a href="http://man.openbsd.org/xterm.1">xterm(1)</a>, use UTF-8 mode by default.
<li>In <a href="http://man.openbsd.org/httpd.8">httpd(8)</a>, set the content charset for auto index generated pages.
<!-- 2016-03-07 -->
<li>Make "cp -i" behave as "mv -i" or "rm -i", independently of whether stdin is a tty or not.
<li>Do not remove RTF_STATIC L2 entries from the routing table. Static entries might not have a cloning route to re-create them and hence be gone when their timer expires.
<!-- 2016-03-06 -->
<li>In <a href="http://man.openbsd.org/kdump.1">kdump(1)</a>, improve display of unknown and KTR_START records.
<li>Avoid refetching blocks already in the buffer cache. This significantly improves read operations on MSDOSFS.
<li>Update to xrandr 1.5.0.
<li>Update to libXrandr 1.5.0.
<li>In <a href="http://man.openbsd.org/ksh.1">ksh(1)</a>, make "set +o" conform with POSIX.
<li>Tweak uvm assertions to avoid locking in some cases.
<!-- 2016-03-05 -->
<li>In <a href="http://man.openbsd.org/file.1">file(1)</a>, sync "archive" magic from file 5.25.
<li>In <a href="http://man.openbsd.org/ntpd.8">ntpd(8)</a> constraints, avoid using %Z specification of <a href="http://man.openbsd.org/strptime.3">strptime(3)</a> which disagress with RFC7231 and can give surprising results on other operating systems.
<li>In <a href="http://man.openbsd.org/tmux.1">tmux(1)</a>, improve UTF-8 locale checking.
<li>Update to unbound 1.5.8.
<li>In <a href="http://man.openbsd.org/ksh.1">ksh(1)</a>, fix POSIX-compliant behavior of "set -u" regarding "$*" and "$@" specials.
<li>Almost completely rewrite <a href="http://man.openbsd.org/mknod.8">mknod(8)</a> in order to allow a speedup of <a href="http://man.openbsd.org/MAKEDEV.8">MAKEDEV(8)</a>.
<li>In <a href="http://man.openbsd.org/tmux.1">tmux(1)</a>, avoid accessing a NULL pointer.
<!-- 2016-03-04 -->
<li>In <a href="http://man.openbsd.org/vmd.8">vmd(8)</a>, set root device to sd0a, instead of wd0a.
<li>In <a href="http://man.openbsd.org/ksh.1">ksh(1)</a>:
<ul>
<li>Don't parse (...|...) patterns in variable substitution inside double quotes. This fixes a POSIX compatibility issue.
<li>Remove the mknod builtin.
</ul>
<!-- 2016-03-03 -->
<li>In <a href="http://man.openbsd.org/ssh.1">ssh(1)</a>, fix ClientAliveInterval when a time-based RekeyLimit is set (bz#2252).
<li>In <a href="http://man.openbsd.org/tmux.1">tmux(1)</a>:
<ul>
<li>Avoid mixing up RGB colours with aixterm colours.
<li>Make the show-* and set-* commands handle a missing target.
</ul>
<li>On amd64 and i386, unwind the trapframe correctly when a breakpoint is set on "syscall". This prevents a fault in <a href="http://man.openbsd.org/ddb.4">ddb(4)</a> on amd64.
<li>Remove the machdep.userldt <a href="http://man.openbsd.org/sysctl.8">sysctl(8)</a>.
<li>In <a href="http://man.openbsd.org/ieee80211.9">ieee80211(9)</a>, restore an assignment of device current mode. This fixes <a href="http://man.openbsd.org/iwi.4">iwi(4)</a> fatal firmware errors.
<!-- 2016-03-02 -->
<li>Bump link_maxhdr (the space reserved before an ip packet payload for link headers) from 16 to 64.
<li>In <a href="http://man.openbsd.org/scp.1">scp(1)</a>, improve accuracy of reported transfer speeds.
<li>In <a href="http://man.openbsd.org/sftp.1">sftp(1)</a> and <a href="http://man.openbsd.org/scp.1">scp(1)</a>, improve precision of the progress meter.
<li>In <a href="http://man.openbsd.org/tmux.1">tmux(1)</a>, improve <a href="http://man.openbsd.org/wcwidth.1">wcwidth(1)</a> and <a href="http://man.openbsd.org/mctowc.1">mbtowc(1)</a> error handling.
<li>Remove Linux emulation support.
<li>In libssl, add bounds checking for read_ledword().
<!-- 2016-03-01 -->
<li>In libssl, add bounds checking for <a href="http://man.openbsd.org/BN_hex2bn.3">BN_hex2bn(3)</a> and <a href="http://man.openbsd.org/BN_dec2bn.3">BN_dec2bn(3)</a>.
<li>In <a href="http://man.openbsd.org/acpi.4">acpi(4)</a>, add more Windows versions for _OSI checks.
<li>In <a href="http://man.openbsd.org/cpsw.4">cpsw(4)</a>, detect and only enable the port that is actually used. This avoids device timeouts. Also enable interrupt pacing to limit interrupts at 2K/s.
<li>Set the IFF_MULTICAST flag on <a href="http://man.openbsd.org/tun.4">tun(4)</a> interfaces so IPv6 addresses can be assigned.
<li>In <a href="http://man.openbsd.org/diff.1">diff(1)</a>, rectify line numbers for "s/.//" commands in ed-style diffs.
<li>In libedit, fix a segfault and functional error in c_gets().
<li>In libssl, remove support for ancient, broken DSA implementations.
<!-- 2016-02-28 -->
<li>Fix a bug when IPsec UDP encapsulation is used for IPv6.
<!-- 2016-02-27 -->
<li>In <a href="http://man.openbsd.org/gcc.1">gcc(1)</a>, fix an Internal Compiler Error on alpha when using __sync builtins.
<!-- 2016-02-26 -->
<li>In <a href="http://man.openbsd.org/fnmatch.3">fnmatch(3)</a>, fix negation of POSIX character classes.
<li>Prevent a memory leak in <a href="http://man.openbsd.org/vnet.4">vnet(4/sparc64)</a>.
<li>Valdate fs_maxsymlinklen in the superblock of ffs and ext2fs filesystems to avoid use of bogus data.
<!-- 2016-02-25 -->
<li>On alpha and sh, now that time_t is 64-bit, no longer ignore the hardware clock when it reports a year after 2037.
</ul>
<p>

</body>
</html>
