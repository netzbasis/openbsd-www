<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD -current changes</title>
<meta name="description" content="OpenBSD -current changes">
<meta name="copyright" content="This document copyright 1996-2012 by OpenBSD.">
<link rel="canonical" href="http://www.openbsd.org/plus.html">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD -current changelog</font></h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="mail.html#Archives">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<br>
<a href="plus54.html">5.4</a>,
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>.
<br>

<p>
<h3><font color="#0000e0">Changes made between OpenBSD 5.8 and -current</font></h3>
<p>

<ul>
<!-- 2015-08-31 -->
<li>In static binaries, invoke <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/kbind.2">kbind(2)</a> once to disable it.
<li>On m88k and sparc, use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/kbind.2">kbind(2)</a> for lazy binding GOT/PLT updates.
<li>It is no longer needed to hold the kernel lock for MP-safe bpfs (again).
<li>Bring back the commit that makes bpf_mtap MP-safe by using <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man9/srp_enter.9">srp</a>, but now using <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man9/srp_follow.9">srp_follow(9)</a> to avoid races and corruption.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man9/srp_follow.9">srp_follow(9)</a> which is necessary to correctly order the taking and releasing of SRP critical sections in situations such as following a chain of data structures linked with SRPs.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/dhclient.8">dhclient(8)</a>, accept multiple domain names in dhcp option 15 (Domain Name). This allows <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/resolv.conf.5">resolv.conf(5)</a> "search" statements to be built with multiple entries.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/syslogd.8">syslogd(8)</a>, don't truncate program names and hostnames in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/syslog.conf.5">syslog.conf(5)</a>. This fixes matching with IP addresses if syslogd is started with -n.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/efifb.4">efifb(4)</a>, check the driver name so that the driver only attempts to attach when we actually want it to.
<li>In binutils 2.17, raise the number of spare local GOT entries from 5 to 7. This fixes building liblto_plugin.so in the gcc 4.9 port.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/tame.2">tame(2)</a> mode:
<ul>
<li>Return EPERM for <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/chmod.2">*chmod(2)</a> if uid/gid change is not towards cr_uid/cr_gid (effective ids).
<li>Consider <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/getfsstat.2">getfsstat(2)</a> an RPATH.
</ul>
<li>Rather than killing when <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/chmod.2">*chmod(2)</a> is asked to do setuid/setgid, clear those bits in the request and continue.
<li>Do not install connected routes on loopback interfaces. This will allow systems with AUTOCONF'd addresses to see loopback connected routes in the routing table.
<li>Fix a use-after-free in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/uow.4">uow(4)</a>.
<li>Compute the checksum before looping back the copy of an IPv6 multicast packet.
<!-- 2015-08-30 -->
<li>Add a framework for resolving libc namespace issues.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/gunzip.1">gunzip(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/uncompress.1">uncompress(1)</a>, ignore setuid/setgid settings from a compress/gzip file.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>:
<ul>
<li>Don't die on an assertion if an .Fo macro lacks its mandatory argument.
<li>Drop leading, internal, and trailing blank characters in \o (overstrike) escape sequences.
</ul>
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping6.8">ping6(8)</a>, remove RH0 support.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ddb.4">ddb(4)</a>:
<ul>
<li>Automatically perform traces upon panic.
<li>Shrink the message to save vertical space and point to <a href="http://www.openbsd.org/ddb.html">http://www.openbsd.org/ddb.html</a>.
</ul>
<li>In the kernel, use a global table for domains instead of building a list at run time.
<li>Prepare the kernel to boot from UEFI. Amongst other things, add <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/amd64/efifb.4">efifb(4)</a>.
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/xhci.4">xhci(4)</a> on macppc.
<li>On macppc, map the whole config1 space based on the size read from the device tree. This allows supplementary PCIe cards to be properly detected and should prevent the kernel from faulting when reading unmapped PCI addresses.
<li>Prevent cards with no midi connectors from attaching <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/midi.4">midi(4)</a> devices.
<!-- 2015-08-29 -->
<li>For <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/chmod.2">*chmod(2)</a>, allow S_ISTXT in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/tame.2">tame(2)</a> mode.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>:
<ul>
<li>Add a minimal implementation of the read-only number register \n(.$ which returns the number of arguments of the current macro.
<li>Implement the escape sequence \\$* which expands to all arguments of the current user-defined macro.
<li>Parse and ignore the escape sequences \, and \/.
<li>Don't escape breakable hyphens yet when we have to reparse the text line because we spring an input line trap.
</ul>
<li>Create a miniroot for alpha.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ws.4">ws(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/synaptics.4">synaptics(4)</a>, read multiple events at once.
<!-- 2015-08-28 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, check for name changes at most once every 500 milliseconds.
<li>On sparc64, add support for switching CPUs in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ddb.4">ddb(4)</a>.
<li>On sh, use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/kbind.2">kbind(2)</a> for lazy binding GOT/PLT updates.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/gdb.1">gdb(1)</a> work again on mips64 PIE binaries by making sure a reasonable 64-bit ABI is selected for 64-bit ELF files instead of a 32-bit ABI.
<li><font color="#e00000">5.8 SECURITY FIX: LibreSSL 2.2.2 incorrectly handles ClientHello messages that do not include TLS extensions, resulting in such handshakes being aborted.</font><br>A source code patch is available for <a href="errata58.html#002_sslhello">5.8</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/amd64/apmd.8">apmd(8)</a>, log battery changes every 10%, not every 21%.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/envy.4">envy(4)</a>, disable interrupts while the midi uart is not in use. This avoids generating unused interrupts when a chatty peripheral is connected but not used.
<li>In binutils 2.17, add support for Irix-style "64-bit" archives.
<li>Fix the build of the drm libraries on sparc64.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/envy.4">envy(4)</a>, fix support of M-Audio Delta 44 cards that use different GPIO pins.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>:
<ul>
<li>Allow environment variables in #{}.
<li>Remove the lock-server option.
<li>Plug a memory leak.
</ul>
<li>In binutils 2.17, do proper GOT slot accounting for symbols that were forced to be local.
<!-- 2015-08-27 -->
<li>Rework the UNIX domain socket garbage collector.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ld.so.1">ld.so(1)</a> work on hppa when _dl_bind_start gets hidden by the version script.
<li>Fix rare occurrences of wrong floating-point values with MP kernels on Octeon.
<li>On mips64, access the image of the floating point registers via p_md.md_regs instead of directly on the frame. This prevents updates from getting lost.
<li>Ensure that <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/syslogd.8">syslogd(8)</a> uses its original command-line arguments when it reloads its configuration and re-executes itself.
<li>Prevent a socket that <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/poll.2">poll(2)</a> reports is writable from becoming unwritable before <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/write.2">write(2)</a> is called.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/doas.1">doas(1)</a>, add a type of "auth-doas" to the perm check to allow <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/login.conf.5">login.conf(5)</a> fiddling.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/aucat.1">aucat(1)</a>, allow sparse blocks to be used as silence if samples are encoded as signed integers.
<li>Remove SSLv3 support from LibreSSL.
<!-- 2015-08-26 -->
<li>On hppa, use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/kbind.2">kbind(2)</a> for lazy binding GOT/PLT updates.
<li>Add more overflow checks to libexpat.
<li><font color="#e00000">5.8 SECURITY FIX: in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8">sshd(8)</a>, inverted logic made PermitRootLogin "prohibit-password" unsafe.</font><br>A source code patch is available for <a href="errata58.html#001_sshd">5.8</a>.
<li>Let MBR have priority over GPT.
<li>Fix an alignment issue in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/bridge.4">bridge(4)</a>.
<!-- 2015-08-25 -->
<li>Add TIOCGETA to the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/tame.2">TAME_IOCTL</a> list. This is used by <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/readpassphrase.3">readpassphrase(3)</a> and libcurses.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/radiusd.8">radiusd(8)</a>, fix a use-after-free in an error path.
<li>On alpha and mips64, use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/kbind.2">kbind(2)</a> for lazy binding GOT/PLT updates.
<li>Remove exect(2). It was unused and not portable across arches.
<li>Hide many libc symbols that should not be used.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/cron.8">cron(8)</a>, use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/ppoll.2">ppoll(2)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/poll.2">poll(2)</a>. This avoids time conversion issues and eliminates a race condition that could delay SIGCHLD and SIGHUP actions.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/syslogd.8">syslogd(8)</a>, don't use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/strlcpy.3">strlcpy(3)</a> on strings that are not NUL-terminated. This prevents a crash.
<li>Fix an out-of-bounds read in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>.
<li>On i386 and powerpc, use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/kbind.2">kbind(2)</a> for lazy binding GOT/PLT updates.
<!-- 2015-08-24 -->
<li>On i386, enforce the kernel W^X policy by properly setting NX (as needed) for kernel text, PTEs, .rodata, data, bss and the symbol regions.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/restore.8">restore(8)</a>, switch from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/utimes.2">utimes(2)</a> to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/utimensat.2">utimensat(2)</a>.
<li>Re-enable GTP support on amd64 and i386.
<li>Remove the -h option from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/radiusd.8">radiusd(8)</a>.
<li>Set the required IPL at the syn-cache pool instead of doing a splsoftnet() explicitly.
<li>Prevent the kernel from removing connected (/64) routes as soon as it configures an AUTOCONF'd address based on a RA.
<li>Fix the GPT code to work with non-DEV_BSIZE disks.
<li>Fix a crash in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>.
<li>Fix a cheating bug in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man6/worm.6">worm(6)</a>.
<li>Fix a crash during "<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ifconfig.8">ifconfig</a> bridge0 destroy".
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/macppc/bm.4">bm(4)</a>, work around slow transfer speed.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cwm.1">cwm(1)</a>:
<ul>
<li>Don't allow freeze operations on fullscreen.
<li>Implement _NET_CLIENT_LIST_STACKING.
</ul>
<li>Use IPL_SOFTNET protection for the pool. This fixes a panic.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sysmerge.8">sysmerge(8)</a>:
<ul>
<li>Switch from /usr/share/sysmerge to /var/sysmerge.
<li>Use /var/sysmerge/backups for persistent backups and keep three earlier rotations.
</ul>
<li>Avoid two potential double frees in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/tame.2">tame(2)</a>.
<!-- 2015-08-23 -->
<li>Fix an fd leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mv.1">mv(1)</a>.
<li>Apply a symbol export list to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ld.so.1">ld.so(1)</a> with just the expected dl*() and the two symbols needed by gdb.
<li>Make the Atom S1200 UART work.
<li>In binutils 2.17, introduce -Bsymbolic-functions and related flags.
<li>On amd64 and sparc64, use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/kbind.2">kbind(2)</a> for lazy binding GOT/PLT updates.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/tame.2">tame(2)</a>:
<ul>
<li>Perform maximum one cwd lookup.
<li>Fix /tmp handling of <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/unlink.2">unlink(2)</a>.
</ul>
<li>Update to xf86-video-geode 2.11.17.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cwm.1">cwm(1)</a>, make CLIENT_STICKY apply to group hide/unhide rather than client hide/unhide.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cc.1">cc(1)</a>, make the -msecure-plt option work, which is necessary to generate Secure-PLT ABI code.
<li>On powerpc, add support for the Secure-PLT ABI variant. This will give us better W^X support on powerpc.
<li>In binutils 2.17, fully enable the Secure-PLT ABI.
<li>In libc, restore codeset checking instead of silently falling back to ASCII.
<li>Revert the bpf+srp commits. They cause problems in a bridge setup.
<!-- 2015-08-22 -->
<li>Move to the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/tame.2">tame(int flags, char *paths[])</a> API/ABI.
<li>Explicitly list the symbols permitted to be exported by libc. This will prevent unintentional additions in the future and sets the stage for reductions.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/doas.1">doas(1)</a>, add the cwd context to the syslog entry.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/urtwn.4">urtwn(4)</a> attach to Netgear WNA1000Mv2.
<li>Ensure <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/tls_read.3">tls_read(3) and tls_write(3)</a> always set outlen to zero on error.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/rc.8">rc(8)</a>, properly handle double quotes in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/wsconsctl.conf.5">wsconsctl.conf(5)</a>.
<!-- 2015-08-21 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ctags.1">ctags(1)</a>, avoid calling <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/system.3">system(3)</a> for the -u option.
<li>Update to libdrm 2.4.64.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh.1">ssh(1)</a>, fix printing of HostKeyAlgorithms=+... when using -G.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8">sshd(8)</a>, fix expansion of HostkeyAlgorithms=+...
<li>Regenerate <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/moduli.5">moduli(5)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cwm.1">cwm(1)</a>:
<ul>
<li>Preserve the command list order from .cwmrc.
<li>Hide the "term" and "lock" commands in the application menu.
<li>Don't let _NET_WM_STATE_STICKY apply to the position and size of a window.
<li>Add the client freeze extension to _NET_WM_STATE Atom, allowing flag to persist.
</ul>
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/em.4">em(4)</a>, run the part of the interrupt handler that does rx completion without holding the kernel lock.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/relayd.8">relayd(8)</a>, don't drop the reply messages when "check icmp" is used with many hosts.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>, avoid an HTTP 405 error when using the WebDAV MOVE method.
<li>Whitelist TIOCGPGRP (for <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/tcgetpgrp.3">tcgetpgrp(3)</a>) in TAME_IOCTL.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/azalia.4">azalia(4)</a>, enable beep and CD controls on ALC292.
<!-- 2015-08-20 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8">sshd(8)</a>, fix the inverted logic that broke PermitRootLogin.
<li>If we're allowed to try and use large pages, we try and fit at least 8 of the items. This amortises the per page cost of an item a bit.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/apci.4">acpi(4)</a>, respect the access size when reading or writing to pci config space and ensure writes are properly aligned. This prevents panics and fixes at least battery status passthrough in vmware and the brightness keys on the X220.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/exp2.3">exp2(3)</a>, avoid left-shifting a negative integer.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cwm.1">cwm(1)</a>, make the big move and resize bindings match what is in the manual page.
<li>On octeon, use the IPD Clock Count register as a timecounter.
<li>Import an alternative routing table backend based on Yoichi Hariguchi's ART implementation.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/identd.8">identd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/tftpd.8">tftpd(8)</a>, use SOCK_NONBLOCK to avoid a FIONBIO <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/ioctl.2">ioctl(2)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/identd.8">identd(8)</a>, don't exit on unknown <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/write.2">write(2)</a> failures.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/azalia.4">azalia(4)</a>, enable audio on ThinkPad docks.
<li>Reactivate <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/tame.2">tame(2)</a> after release.
<!-- 2015-08-19 -->
<li>Remove unused vesafb code.
<li>Update to libepoxy 1.3.1.
<li>In LibreSSL, properly handle missing TLS extensions in client hello as a non-failure.
<li>In ssh:
<ul>
<li>Don't call <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/unlink.2">unlink(2)</a> with an uninitialised path in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh-keygen.1">ssh-keygen(1)</a>.
<li>Don't free an uninitialised pointer in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh.1">ssh(1)</a>.
<li>Fix a double free in an error path.
<li>Improve compat matching for WinSCP and add compat matching for FuTTY.
</ul>
<li>Enable the build of libOSMesa.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/pf.4">pf(4)</a>, keep the IPv6 fragment size as chosen by sender also for packets that are routed on behalf of route-to.
<li>Prevent mips64 FPU emulation from corrupting the page queues in MP systems.
<li>Do not use a stale local address from the routing table. This prevents an interface address without interface pointer causing a uvm_fault.
<li>On octeon, allow booting the SP kernel with a set of CPUs that does not contain core 0.
<li>Unbreak the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ikectl.8">ikectl(8)</a> "ca" commands after the removal of $ENV:: overwriting in LibreSSL.
<!-- 2015-08-18 -->
<li>Remove casts from many calls to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/malloc.3">malloc(3)</a>-like functions
<!-- 2015-08-17 -->
<li>Update the en_US.UTF-8 locale to Unicode 7.0.0.
<li>Remove the last fragments of ST-506 support.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/whois.1">whois(1)</a>, fix whois server detection for new TLDs.
<li>Accept NULL pointers in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man9/rtfree.9">rtfree(9)</a>. This will simplify upcoming conversions of rt_refcnt-- to rtfree(9).
<!-- 2015-08-16 -->
<li><font color="#e00000">5.6 and 5.7 SECURITY FIX: a change to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8">sshd(8)</a> resulted in incorrect permissions being applied to pseudo terminal devices, allowing local users to write to (but not read from) them.</font><br>A source code patch is available for <a href="errata57.html#014_sshd">5.7</a>.
<li>No longer hold the kernel lock when calling bpf.
<li>Make bpf_mtap MP-safe by using <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man9/srp_enter.9">srp</a>.
<li>Avoid a TOCTOU problem in if_input in the bpf handling.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, come out of copy mode when history is cleared.
<!-- 2015-08-15 -->
<li>Add Loongson 3A support.
<li>On alpha, consider ISA interrupts level-triggered if the SRM has explicitly set them up that way. This makes the kernel correctly run with serial console on the Multia.
<li>Enable AlphaBook 1 support in alpha bsd.rd.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/smtpd.8">smtpd(8)</a>:
<ul>
<li>Increase the size of acceptable headers lines.
<li>Assume messages use 8-bit bytes by default.
</ul>
<!-- 2015-08-14 -->
<li>Remove charsets other than UTF-8 from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/locale.1">locale(1)</a> output.
<li>Load LC_MESSAGES locale only if the character encoding is UTF-8.
<li>Disable support for loading LC_CTYPE locales other than UTF-8.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/swapctl.8">swapctl(8)</a>, use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/vfork.2">vfork(2)</a> &amp; <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/execl.2">execl(2)</a> instead of <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/system.3">system(3)</a> when invoking <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/mount_nfs.8">mount_nfs(8)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/myx.4">myx(4)</a>:
<ul>
<li>Rework the way the packets on the rx rings are tracked.
<li>Move to a per rx ring timeout for refilling empty rings. This gets rid of the locking around the refilling of the rx ring.
<li>Use a single atomic op instead of one per packet when doing global tx free accounting. This allows packets to be sent a little faster.
</ul>
<li>On macppc and powerpc, replace the assembly mutexes with a C implementation.
<!-- 2015-08-13 -->
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man9/ml_requeue.9">ml_requeue(9)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man9/mq_requeue.9">mq_requeue(9)</a> to prepend mbufs on lists/queues.
<li>Move the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/locate.1">locate(1)</a> database build directory back to /tmp.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ntpd.8">ntpd(8)</a>, avoid calling poll() multiple times with no timeout, racking up CPU time for no real reason.
<li>Add the -A, -P and -t options to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/nm.1">nm(1)</a>.
<li>Remove discarded attributes from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/disktab.5">disktab(5)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/rc.8">rc(8)</a>, improve the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/sysctl.conf.5">sysctl.conf(5)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/mixerctl.conf.5">mixerctl.conf(5)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/wsconsctl.conf.5">wsconsctl(5)</a> parsers.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pkg_create.1">pkg_create(1)</a> recreate packages correctly.
<li>Prevent an mbuf leak when no handler consumed that mbuf.
<!-- 2015-08-12 -->
<li>Fix a case where <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/ceill.3">ceill(3)</a> returns 1.0L.
<li>Rework the /etc/rc script.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, add the "-of" suffix to the "left", "right", "up" and "down" special tokens for the pane index.
<li>Plug two memory leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ti.4">ti(4)</a>.
<!-- 2015-08-11 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/acpihpet.4">acpihpet(4)</a>, check for a proper HPET period value during attach.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>, add various improvements to the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/magic.5">magic(5)</a> parser.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sndiod.8">sndiod(8)</a>, don't make system calls when not being used.
<li>Update time zone data to tzdata2015f.
<li>Fix recent regressions in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ugold.4">ugold(4)</a>.
<!-- 2015-08-10 -->
<li>Improve <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/openssl.1">openssl(1)</a> s_client -starttls xmpp support.
</ul>
<p>

</body>
</html>
