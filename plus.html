<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OpenBSD -current changes</title>
<meta name="description" content="OpenBSD -current changes">
<meta name="copyright" content="This document copyright 1996-2012 by OpenBSD.">
<link rel="canonical" href="http://www.openbsd.org/plus.html">
</head>

<body bgcolor="#ffffff" text="#000000" link="#23238e">

<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>
<p>
<h2><font color="#e00000">OpenBSD -current changelog</font></h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="mail.html#Archives">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
Note: <font color="#e00000">Problems for which patches exist are marked in red</font>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<br>
<a href="plus54.html">5.4</a>,
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>.
<br>

<p>
<h3><font color="#0000e0">Changes made between OpenBSD 5.7 and -current</font></h3>
<p>

<ul>
<!-- 2015-05-31 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, implement the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man7/roff.7">roff(7)</a> "r" conditional.
<!-- 2015-05-30 -->
<li>Plug a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/relayd.8">relayd(8)</a>.
<li>Introduce native atomic operations for i386.
<li>Acquire/release the i2c bus before/after reading the temperature register. This prevents concurrent access to the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/macppc/smu.4">smu(4)</a> microcontroller on Apple G5 machines, which would result in errors reading the RTC.
<li>On armv7, set the usb otg port on the cubox to host mode and attach ehci to it.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>, support - to read from stdin.
<!-- 2015-05-29 -->
<li>Set the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/sdmmc.4">sdmmc(4)</a> emmc highspeed flag if the capability register claims it is supported.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>:
<ul>
<li>Expand formats again inside #().
<li>Don't use special strings if #() commands fail, just remove the format (as if the command produced nothing).
</ul>
<li>Switch vax to binutils 2.17.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ld.so.1">ld.so(1)</a> on alpha cope with binaries built with secureplt.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>, if reading into a buffer, correct the stored file size at EOF.
<li>In the asr, fix a possible off-by-one when reading /etc/hosts if it doesn't end with a newline.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>, silently fall back to /etc/magic if ~/.magic can't be opened.
<!-- 2015-05-28 -->
<li>Initial addition of "Patrol Read" support in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/bio.4">bio(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/bioctl.8">bioctl(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/mfi.4">mfi(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ntpd.8">ntpd(8)</a>, detect crashes from constraint sub-processes, instead of ignoring them.
<li>When the machdep.allowaperture sysctl is set to 3, allow concurrent access.
<li>Save the cpuid(6) eax bits in the cpu_info and report the SENSOR and ARAT bits from it.
<li>Switch alpha, arm, sh and sparc to binutils 2.17.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/relayd.8">relayd(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/smtpd.8">smtpd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/snmpd.8">snmpd(8)</a>, do not try to unlink the control socket in an unprivileged child process on shutdown.
<!-- 2015-05-27 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh.1">ssh(1)</a>, increase the allowed length of the known host file name in the log message to be consistent with other cases (bz#1993).
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh-keygen.1">ssh-keygen(1)</a> default to ed25519 keys when compiled without OpenSSL (bz#2388).
<li>Remove 1k bit groups from ssh and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/moduli.5">moduli(5)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh.1">ssh(1)</a>, reorder client proposal to prefer diffie-hellman-group-exchange-sha1 over diffie-hellman-group14-sha1.
<!-- 2015-05-26 -->
<li>In ssh:
<ul>
<li>Cap DH-GEX group size at 4kbits for Cisco implementations (bz#2209).
<li>Support PKCS#11 devices with external PIN entry devices (bz#2240).
<li>Add a stronger (4k bit) fallback group that sshd can use when the moduli file is missing or broken, sourced from RFC3526 (bz#2302).
</ul>
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/audioctl.1">audioctl(1)</a>, expose the number of bytes processed by the sound card instead of the number of bytes processed minus the xruns.
<li>Don't create ICMP states on reply packets unless sloppy state tracking is used.
<li>Allow for multiple RTF_CLONING routes with the same priority.
<li>Normalize route destination before checking for MPATH conflicts.
<li>Do not create ARP entries for RTF_BROADCAST routes.
<li>Include the firmware for usb devices on the armv7 ramdisk.
<!-- 2015-05-25 -->
<li>Make vlans inherit their parents hardmtu as well as mtu.
<li>Build all the firmware for usb devices on armv7.
<li>Build <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/wsconsctl.8">wsconsctl(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/wsconscfg.8">wsconscfg(8)</a> on armv7.
<li>Really fix the panic in the PF_KEYv2 code by reverting src/sys/net/pfkeyv2_convert.c to r1.52.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ipsecctl.8">ipsecctl(8)</a>, bump up the default Diffie-Hellman group to modp3072.
<li>Fix a panic in the PF_KEYv2 code.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/pms.4">pms(4)</a>, match newer Elantech v4 touchpads.
<li>Port the ELF m88k work to binutils 2.17. It is good enough to build a booting kernel, and hopefully userland as well.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ugen.4">ugen(4)</a>, prevent a use after free in by closing all open endpoints upon detach. This fixes a panic.
<!-- 2015-05-24 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.c">sshd(8)</a>, add the missing -c option to getopt().
<li>Always establish all the necessary interrupts at pckbc attach time, and get rid of the "intr_establish" pckbc callback.
<li>Update to xf86-video-ast 1.0.1, xf86-video-savage 2.3.8, xf86-video-siliconmotion 1.7.8, xf86-video-tdfx 1.4.6, xf86-video-trident 1.3.7 and dejavu-ttf 2.35.
<li>Build <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/wsudl.4">wsudl(4)</a> on armv7.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/udl.4">udl(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/uvideo.4">uvideo(4)</a> to armv7 GENERIC.
<!-- 2015-05-23 -->
<li>Update to xf86-video-cirrus 1.5.3, xf86-video-i740 1.3.5, xf86-video-mach64 6.9.5, xf86-video-mga 1.6.4, xf86-video-neomagic 1.2.9 and randrproto 1.4.1.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sftp.1">sftp(1)</a>, fix a memory leak in an error path.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sparc64/ldomctl.8">ldcomctl(8)</a>, fix a memory leak in an error path.
<li>Introduce ipsec-id bundles and use them for ipsecflowinfo. This fixes rekeying for l2tp/ipsec against multiple windows clients and saves memory.
<!-- 2015-05-22 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/dump.8">dump(8)</a>, canonicalize all devices to DUIDs in order to make -w and -W output consistent.
<li>Don't use an uninitialised softc pointer in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/midi.4">midi(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/iwm.4">iwm(4)</a>, reserve two DMA segments for sending commands to the firmware. This hopefully fixes a hardware error.
<!-- 2015-05-21 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh.1">ssh(1)</a>, reorder EscapeChar option parsing to avoid a single-byte out-of-bounds read (bz#2396).
<li>Add a knob to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/sshd_config.5">sshd_config(5)</a> to relax GSSAPI host credential check for multihomed hosts (bz#928).
<li>Update Diffie-Hellman groups in ssh and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/moduli.5">moduli(5)</a>.
<li>Establish interrupts for both keyboard and mouse slots at isa pckbc attach time, rather than lazily from pckbc when slots are discovered.
<li>Switch amd64, hppa, mips64, mips64le and powerpc to binutils 2.17.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh-keygen.1">ssh-keygen(1)</a>, support -lF hostname to find search known_hosts and print key hashes.
<li>Correctly state the link state to INVALID when creating a carp interface.
<li>Fix an unintialized variable in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ix.4">ix(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/sshd_config.5">sshd_config(5)</a>:
<ul>
<li>Support arguments to AuthorizedKeysCommand.
<li>Add AuthorizedPrincipalsCommand that allows getting authorized_principals from a subprocess rather than a file.
</ul>
<!-- 2015-05-20 -->
<li>Remove <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/hotplug.4">hotplug(4)</a> support from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ntpd.8">ntpd(8)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>, correctly print the filesize in the Content-Length header for files larger than 2 GB on 32-bit architectures.
<!-- 2015-05-19 -->
<li>FIx installing sets from CD-ROM if more than one CD-ROM drive is present.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/chroot.8">chroot(8)</a>, when a user is specified via the -u flag, use setusercontext() to setup (most of) the execution environment.
<li>Add the -c flag to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/id.1">id(1)</a> to display the user's login class.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/icmp.4">icmp(4)</a>, do not leak a rtentry if it is unusable.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/bge.4">bge(4)</a>, increase a maximum firmware handshake timeout to 10 seconds.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, prevent missing cursors with emacs-in-tmux-in-tmux.
<!-- 2015-05-18 -->
<li>Use the same va entry point on all armv7 socs.
<li>Make armv7 startup PIC.
<li>Make TAPE=- mean stdout in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tar.1">tar(1)</a>.
<li>On amd64, do lazy update/reset of the FS.base and %[def]s segment registers.
<li>Avoid a kernel crash in the NFS code while running netstat or pstat -f.
<li>Make the compiler emit visibility information for (undefined) references with non-default visibility.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/dhclient.8">dhclient(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/dhcpd.8">dhcpd(8)</a>, accept hostnames starting with 0-9.
<li>Fix two use-after-free cases in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/relayd.8">relayd(8)</a>.
<li>Change <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/spamd.8">spamd(8)</a> to use divert-to instead of rdr-to.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/dhclient.8">dhclient(8)</a>, stop rejecting leases with a subnet that overlaps a subnet already present.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ntpd.8">ntpd(8)</a>, scale the error margin with the number of resolved NTP peers. This way, a very small number of outliers in a NTP pool cannot immediately trigger new connections to the contraint servers.
<li>Enable <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ntpd.8">ntpd(8)</a> by default at install time.
<li>Export the rdomain to userland through struct if_data.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cu.1">cu(1)</a>, add the -d flag and the dc capability to open devices non-blocking. This is useful for the few drivers that do not support cua* so tty* must be used.
<!-- 2015-05-17 -->
<li>Reenable the page zeroing thread on MP m88k kernels.
<li>On aviion and luna88k, make sure the lock is not taken for clock interrupts.
<li>Add the -D option to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/nm.1">nm(1)</a> to display the dynamic symbol table.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/nptd.8">ntpd(8)</a>, if the constraint resolves to multiple IP addresses, try each of them one by one.
<!-- 2015-05-16 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/axe.4">axe(4)</a>, read ethernet address from EEPROM on AX88772B.
<li>Add a F_ISATTY option to fcntl(), so that isatty() can use this rather than than the bloated ioctl() interface.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/aucat.1">aucat(1)</a>, prevent periodic glitches occurring under certain circumstances.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/audioctl.1">audioctl(1)</a>, display simply "play" when play mode is set.
<!-- 2015-05-15 -->
<li>Make it possible to use the same network on multiple interfaces at the same time.
<li>Give <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/carp.4">carp(4)</a> interfaces their own low priority.
<li>Introduce if_output(), a function do to the last steps before enqueuing a packet on the sending queue of an interface.
<li>Remove the "Use DUIDs rather than device names in fstab?" question from the installer and use DUIDs unconditionally.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/smtpd.8">smtpd(8)</a>, don't log credentials upon AUTH LOGIN authentication failures.
<!-- 2015-05-14 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh-agent.1">ssh-agent(1)</a>:
<ul>
<li>Use a salted hash of the lock passphrase instead of plain text and do constant-time comparisons of it.
<li>Add a 0.1s incrementing delay for each failed unlock attempt up to 10s.
</ul>
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/upd.4">upd(4)</a>, make the "Battery Present" sensor a depency of all the battery-related sensors only if it is present.
<li>Update to font-util 1.3.1.
<li>Extend <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/autoinstall.8">autoinstall(8)</a> to allow for <em>hostname</em>-<em>mode</em>.conf response files and to put response files in a subdir of the webserver's document root.
<!-- 2015-05-13 -->
<li>On armv7, rework the imxenet hardware address setup.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/smtpd.8">smtpd(8)</a>, avoid multiple "From " and "Return-Path" headers.
<!-- 2015-05-12 -->
<li>Translate the fec parameters from the novena dtb to set a different clock skew to the same micrel phy used on sabre lite. This change resolves the stability problems with imxenet on novena.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, to replace c0-*, add a high watermark to the pty event, and also backoff when the any of the ttys the pane is going to write to has buffered enough data.
<li>Revert r1.3 of src/gnu/usr.bin/binutils-2.17/bfd/elflink.c. It introduces bogus failures when inter-library dependencies are present.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/em.4">em(4)</a>, make sure the rx ring lwm is set to at least 4. As far as we know, all hardware variants need at least 4 descriptors on the rx ring to be able to receive packets.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>:
<ul>
<li>Add bell-action "other".
<li>Add a session_alerts format and use this in the default set-titles-string.
</ul>
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/hifn.4">hifn(4)</a>, fix a potential use-after-free and a memory leak.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/urtwn.4">urtwn(4)</a>:
<ul>
<li>Match additional devices (RTL8188CU_3, DWA123D1, DWA125D1).
<li>Fix efuse reading (which fixes a potential error in MAC address read from efuse).
</ul>
<!-- 2015-05-11 -->
<li>Fix an uninitialized variable access in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/npppd.8">npppd(8)</a>.
<li>imxiic is known to be broken, so don't try attaching it on utilite.
<li>On armv7, raise VM_PHYSSEG_MAX to two and load an additional physical memory segment if u-boot reports it. This is needed for the utilite where u-boot reports two 1GB segments of physical memory.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/em.4">em(4)</a>, support reading from an OTP iNVM.
<li>Fix a potential use-after-free in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/pf.4">pf(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/bioctl.8">bioctl(8)</a>, use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/explicit_bzero.3">explicit_bzero(3)</a> on private data.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, remove the c0-* options which never really worked satisfactorily.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/upd.4">upd(4)</a>, refresh sensor values asynchronously.
<li>Remove all audio format conversion code from the kernel as we already do better conversions in user mode.
<!-- 2015-05-10 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/amd64/nvram.4">nvram(4/amd64)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/lpt.4">lpt(4)</a>, convert from uiomovei() to uiomove() to prevent short tranfers.
<li>When checking flags that will be passed to open(), test the O_ACCMODE portion separately to avoid false negatives.
<li>Set POLLHUP even if no valid events were specified as per POSIX.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/urtwn.4">urtwn(4)</a>:
<ul>
<li>Repair firmware reset on RTL8188CUS devices (and perhaps others).
<li>Fix 11b performance for RTL8188EU devices.
</ul>
<li>Update to kbproto 1.0.7, libFS 1.0.7, libXaw 1.0.13, libXrender 0.9.9, libXt 1.1.5, libfontenc 1.1.3, libpciaccess 0.13.4, libxkbfile 1.0.9, setxkbmap 1.3.1, smproxy 1.0.6, twm 1.0.9, x11perf 1.6.0, xcmsdb 1.0.5, xcompmgr 1.1.7, xdpyinfo 1.3.2, xdriinfo 1.0.5, xedit 1.2.2, xev 1.2.2, xgamma 1.0.6, xgc 1.0.5, xhost 1.0.7, xkbevd 1.1.4, xkbprint 1.0.4, xlsatoms 1.1.2, xlsfonts 1.0.5, xmag 1.0.6, xman 1.1.4, xmodmap 1.0.9, xvinfo 1.1.3 and xorg-docs 1.7.1.
<!-- 2015-05-09 -->
<li>Adjust the physical memory limit on armv7 in order to prevent a panic on the Novena.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/col.1">col(1)</a>, recognize SUSv2-style escape-digit sequences in the input stream.
<li>Various improvements to the GPT code.
<!-- 2015-05-08 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/wsdisplay.4">wsdisplay(4)</a>, when changing screen saver parameters, check the flags of the currently displayed screen in order to decide whether the screen saver needs to be retriggered, rather than the flags of the device we are issuing the ioctl on. Also, ensure the screen burner gets reenabled when switching from X11 to a virtual text console, and disabled when switching back to X.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/wsconsctl.8">wsconsctl(8)</a>, add a flag for variables to prevent reading their value after modifying them and use this flag for display.focus. Also disallow -= and += syntax for display.focus.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/col.1">col(1)</a>, fix various integer overflows and underflows, and logic errors.
<li>Switch i386 and sparc64 to binutils 2.17.
<!-- 2015-05-07 -->
<li>Avoid NULL function pointer dereference during boot on sabresd.
<li>Add initial board-specific parts of Novena support to armv7.
<li>In ssh:
<ul>
<li>Don't choke on new-format private keys encrypted with an AEAD cipher (bz#2366).
<li>Fix a post-auth crash with permitopen=none (bz#2355).
</ul>
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, update the environment when switching sessions as well as attaching.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/man.1">man(1)</a>, let the -m option add to the default manpath rather than override it.
<li>Include the timestamp TCP option in keep alive packets.
<!-- 2015-05-06 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, add the window_linked format.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/top.1">top(1)</a>, display thread IDs instead of the name of the process's owner when -H is used.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, turn cursor off during redraw.
<!-- 2015-05-05 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8">sshd(8)</a>, blacklist DH-GEX for specific PuTTY versions rather than all PuTTY versions.
<li>Bring back the MI atomic API for powerpc.
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ld.so.1">ld.so(1)</a>.
<li>In asr, skip loopback addresses, not loopback interfaces, per RFC 3493.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>, implement If-Modified-Since.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8">sshd(8)</a>, don't offer DH-GEX to WinSCP.
<li>Flag user-specified routes with an AF_LINK gateway as RTF_LLINFO.
<!-- 2015-05-04 -->
<li>Add the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/disklabel.8">disklabel(8)</a> template file based autopartitioning feature to the installer.
<li>Add SwissSign CA root certificates to /etc/ssl/cert.pem.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/aucat.1">aucat(1)</a>, fix a clipping bug in float-to-fixed-point conversion.
<li>Add support for RTL8188EU chips to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/urtwn.4">urtwn(4)</a>.
<li>Fix a crash on HP bc2500 blades with MP kernels when writing to the DSDT.
<li>Use ether_input() as default input packet handler and do the necessary <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man9/m_adj.9">m_adj(9)</a> to keep <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/bridge.4">bridge(4)</a> working while other pseudo-drivers are converted to if_input().
<!-- 2015-05-03 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/compress.1">compress(1)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cp.1">cp(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mv.1">mv(1)</a>:
<ul>
<li>Preserve times to nanosecond precision instead of just microsecond.
<li>Prefer to set attributes by fd for regular files, and don't follow symlinks for others.
</ul>
<li>Add byte-range support to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>.
<!-- 2015-05-02 -->
<li>Make sure no kernel data is leaked in malloced memory in the padding of struct dirent when reading a directory over NFS.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/dump.8">dump(8)</a>, eliminate the -U flag and make usage of DUID in /etc/dumpdates the default.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping.8">ping(8)</a>, allow a TTL of 0.
<li>Fix some problems with <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/relayd.8">relayd(8)</a> configuration reload.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/dhclient.8">dhclient(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/dhcpd.8">dhcpd(8)</a>, correct switch between current and previous line buffers when encountering a carriage return in the input.
<li>Rework hppa mutexes: always record which cpu owns the lock and improve the mutex diagnostics/assertions.
<li>Drop pf_rules and ipsec_rules from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/rc.conf.5">rc.conf(5)</a>.
<!-- 2015-05-01 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping6.8">ping6(8)</a>, change the lower bound of -h from -1 to 0.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>:
<ul>
<li>Fix misformatting of <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man7/man.7">man(7)</a> manuals and potentially of <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man7/mdoc.7">mdoc(7)</a> manuals.
<li>Fix an assertion failure.
</ul>
<li>Reenable page zeroing thread on SMP mips kernels.
<li>Do not grab the kernel lock for clock interrupts on mips64, octeon and sgi.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh.1">ssh(1)</a>, improve error messages on TCP connection resets (bz#2257).
<!-- 2015-04-30 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8">sshd(8)</a>, prevent authorized_keys options picked up on public key tests without a corresponding private key authentication being applied to other authentication methods.
<li>Pass fflag to VOP_POLL so vfs fifo functions can get at the file flags to check FREAD/FWRITE if needed.
<li>Avoid a NULL dereference in fd_getfile_mode().
<li><font color="#e00000">5.6 and 5.7 SECURITY FIX: a remote user can crash <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>.</font><br>A source code patch exists for <a href="errata56.html#022_httpd">5.6</a> and <a href="errata57.html#005_httpd">5.7</a>.
<li><font color="#e00000">5.6 and 5.7 SECURITY FIX: malformed binaries could trigger kernel panics or view kernel memory</font><br>A source code patch exists for <a href="errata56.html#023_elf">5.6</a> and <a href="errata57.html#006_elf">5.7</a>.
<li><font color="#e00000">5.6 and 5.7 SECURITY FIX: multiple issues in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cpio.1">cpio(1)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pax.1">pax(1)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tar.1">tar(1)</a>.</font><br>A source code patch exists for <a href="errata56.html#024_tar">5.6</a> and <a href="errata57.html#007_tar">5.7</a>.
<li>Don't add a separate .got.plt section as it would result in a partially writable GOT. <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ld.so.1">ld.so(1)</a> will properly write-protect the single .got.
<li>Prevent a user after free in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/tun.4">tun(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ix.4">ix(4)</a>, set the correct media type for 1000baseLX SFPs.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/grep.1">grep(1)</a>, warn when the user specifies -R but no files, like GNU grep.
<li>Allow use of 1Gb 1000baseLX SFPs in 82599 <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ix.4">ix(4)</a> SFP+ port.
<li>Optimise sensor I/O in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/upd.4">upd(4)</a>.
<li>Indroduce fd_getfile_mode() and use it were fd_getfile() is directly followed by a mode check.
<!-- 2015-04-29 -->
<li>Fix two assertion failures in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>.
<li>Add the tmux and tmux-256color entries to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/termcap.5">termcap(5)</a> and terminfo. This can be used inside tmux for correct italics support.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, if default-terminal is set to "screen" or "screen-*", follow historic screen(1) behaviour and send smso (standout) instead of sitm (italics) for SGR 3.
<li>Fix a use after free and a NULL pointer access in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>.
<li>Support passing a template file for the auto-allocation to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/disklabel.8">disklabel(8)</a>.
<li>Fix an fd leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/relayd.8">relayd(8)</a>.
<!-- 2015-04-28 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/sshd_config.5">sshd_config(5)</a>, allow ListenAddress, Port and AddressFamily in any order (bz#68).
<li>Avoid a NULL dereference in CBS_get_any_asn1_element().
<li>In libtls, reject a dNSName of " " for the subjectAltName extension, per RFC 5280.
<li>Explicitly include .codepatch and .codepatchend in .rodata such that the binutils 2.17 linker doesn't make them disappear.
<li>Protect the per-process itimerval structs with a mutex.
<li>On hppa, don't grab the kernel lock for clock interrupts. The way we use mutexes these days is incompatible with that practice and leads to deadlocks.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/sf.4">sf(4)</a>, fix a memory leak in an error path.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, add select-layout -o to undo the last layout change.
<!-- 2015-04-27 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>, fix a memory leak in an error path.
<li>In the installer, rework sshd enable root login questions in light of sshd PermitRootLogin default change. The new default is not to ask to enable root logins when a non-root user has been added.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8">sshd(8)</a> default to PermitRootLogin=no.
<li>Do not call nd6_purge() before purging the IPv6 addresses of a detached interface. This fixes a use after free introduced in r1.98 of src/sys/netinet6/in6.c.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>:
<ul>
<li>Add simple privilege separation.
<li>Use a <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/systrace.4">systrace(4)</a> sandbox with a short whitelist of allowed syscalls for the file(1) child process.
</ul>
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/upd.4">upd(4)</a>, parse the HID descriptor multiple times to find sensors. This avoid lookups in the hot path for sensors that depend on the value of others.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, if the requested pane is already active, do not unzoom the window (or doanything else). This prevents mouse clicking when zoomed causing unzoom.
<li>Correctly write the 64bits of the HID 1, 4 and 5 registers on powerpc.
<!-- 2015-04-26 -->
<li>Allow "sshd -f none" to skip reading the config file, much like"ssh -F none" does.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>, don't support -s on FIFOs.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/bgpd.8">bgpd(8)</a> check the length of the control socket path to make sure it fits -- just like <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/bgpctl.8">bgpctl(8)</a> does.
<li>Fix a typo in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sndiod.8">sndiod(8)</a>: the buffer size should be 7680 rather than 7860.
<li>Get dwc2 working on octeon:
<ul>
<li>Transplant the clock setup code from octhci.
<li>Add a bus space tag to deal with dwc2 using little endian addressing.
<li>ump up the rx fifo size, necessary for umass/sd to work.
</ul>
<li>Support checksum offloading for IPv4 TX on <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/vio.4">vio(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/bgpctl.8">bgpctl(8)</a>, for every policy we write out, flush the output so we don't get a partially written line.
<li>On i386, disable PAE when switching to the hibernate resume pagetables. This makes (un)hibernate work with the new PAE pmap.
<li>On i386, enable NX support in the resume path. This makes suspend/resume work with the PAE pmap.
<li>On i386, only enable PAE if the CPU we're running on has NX support.
<li>Bump i386 MAXDSIZ to 3 GB.
<li>Make the Belkin Components F5U109 Serial work at 115200 baud in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/umct.4">umct(4)</a>.
<!-- 2015-04-25 -->
<li>Require a PT_LOAD segment's p_filesz to be no larger than its p_memsz.
<li>In the IRR parser of <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/bgpctl.8">bgpctl(8)</a>, ignore case when reading the tokens.
<li>We are now following the ABI and always clear cld on function entry, so remove the extra CLD instructions from when that wasn't true.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>, only print MIME warnings when warnings are enabled.
<li>Repair boot device detection when booting off the second SCSI controller on AV530.
<li>Update to perl 5.20.2.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>, fail if a \ appears at EOL of a <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/magic.5">magic(5)</a> file rather than continuing off the end of the buffer.
<li>In LibreSSL, don't ignore the reference count in X509_STORE_free.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, explicitly cancel mouse "button" mode. This happens implicitly with some of the other things we send with xterm, but not with urxvt.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/m4.1">m4(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/make.1">make(1)</a>, adda check for overflow while doubling.
<li>In LibreSSL, check for invalid leading zeros in CBS_get_asn1_uint64.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/bgpd.8">bgpd(8)</a>, allow rules that match directly on the peer AS. Also adjust the IRR ruleset output to include the declared peer AS instead of hoping they listed their neighbor IP address.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>, prepend files or directories containing ":" with "./" in directory indexes as per RFC 3986.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/bgpctl.8">bgpctl(8)</a>, handle an IRR record of "export ... action X" the same way we handle "import ... action X".
<!-- 2015-04-24 -->
<li>Add a quirk to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/azalia.4">azalia(4)</a> for the Cirrus Logic CS4208 which is needed for MacBookAir6,1.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>:
<ul>
<li>Set up the signal handler earlier so that we don't get zombies.
<li>Allow choice options (multiple states) to be toggled between states 0 and 1.
<li>Set the working directory for run-shell and if-shell.
</ul>
<li>Enable PAE mode for those CPUs that support it. This allows us to use the NX bit for userland and kernel W^X. Unlike the previous c.2008 PAE experiment, this does not provide &gt; 4GB phys ram on i386 -- PAE is solely being used for NX capability this time. If you need &gt; 4GB phys, use amd64.
<li>Make sure we keep the whole recursive mapping of the PDP instead of just the mapping for the first page when tearing things down.
<li>Remove <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-5.6/man1/tip.1">tip(1)</a>: it has been superseded by <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cu.1">cu(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>:
<ul>
<li>If ~/.magic exists but can't be used, fail rather than silently falling back to /etc/magic.
<li>Do not attempt to use ~/.magic if running as root (or issetugid()).
</ul>
<li>Add a new implementation of <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/file.1">file(1)</a>. This is a simplified, modernised version with a nearly complete <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/magic.5">magic(5)</a> parser but omits some of the complex builtin tests (notably ELF) and has a reduced set of options.
<li>Revert r1.7 of src/sys/arch/powerpc/include/atomic.h (implement the MI atomic API for PowerPC). This code triggers an off by one in device_unref().
<li>Enable the NX bit and use it in the PAE pmap code. PAE is still disabled while we're chasing at least one remaining bug.
<li>Fix a segfault in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/user.8">user(8)</a>.
<!-- 2015-04-23 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh-agent.1">ssh-agent(1)</a>, add the -D option to leave ssh-agent in foreground without enabling debug mode (bz#2381).
<li>Use "softintr_pic0" instead of "softintr_fakepic" when faking a struct device so there is enough space in the buffer for a NUL and the unit is included in the string.
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh-askpass.1">ssh-askpass(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/xlock.1">xlock(1)</a>, don't read past the end of an array.
<li>Fix a crash in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/relayd.8">relayd(8)</a>: we cannot log errors with server_close() before allocating clt_log evbuffer.
<li>Fix a 13 year old typo that should be responsible for the unhappiness of UVM on PowerPC architectures.
<li>Replace the use of struct ifqueue in pipex with mbuf_queues.
<!-- 2015-04-22 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8">sshd(8)</a>, check for and reject missing arguments for VersionAddendum and ForceCommand (bz#2281)
<li>Implement the MI atomic API for PowerPC to avoid using gcc builtins that include extra sync operations.
<!-- 2015-04-21 -->
<li>Unknown certificate extensions are non-fatal in ssh, so don't fatal when they are encountered (bz#2387).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>:
<ul>
<li>Fix moving windows to nonexistent indexes when renumber-windows is off.
<li>Do not die on USR1 if any of the socket parent directories are missing.
<li>Always format real layout even when zoomed.
<li>Look up indexes as number before name. This makes more sense if windows are named starting with numbers.
</ul>
<li>Remove an extra lcr3 that snuck into pmap_switch, responsible for various reaper panics.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/rtadvd.8">rtadvd(8)</a>, don't let rltime exceed 9000 seconds, per RFC 4861.
<li>Avoid a use after free in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>:
<ul>
<li>Pass mouse events through to commands for if-shell.
<li>Pass mouse events triggering a drag on to the application inside the pane.
<li>Bind mouse dragging so that it is passed through to applications if they want it.
</ul>
<li>Revert r1.182 of src/sys/kern/subr_pool.c (try and place at least 8 items on a page if we're able to use large page allocators) again. Incoherent architectures aren't having much fun with it.
<!-- 2015-04-20 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ntpd.8">ntpd(8)</a>, fix a memory leak if tls_read() fails.
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/relayd.8">relayd(8)</a>.
<li>Rework sgi mutexes to use the owner pointer as the lock (similar to r1.14 of src/sys/arch/alpha/alpha/mutex.c).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, add support for multiple key tables to commands to be bound to sequences of keys.
<li>In the installer, fix asking for list of http servers via "?". This should fix scanning for wireless networks too.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, avoid out-of-bounds read access. This sometimes prevented proper warnings about text nodes preceding the first section header.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, make jump-to-backward/jump-to-forward repeatable withjump-reverse/jump-again.
<li>Remove a typo introduced in r1.185 of src/sys/net/route.c. Because of this typo, a local route was <em>always</em> created.
<li>Do not treat loopback interfaces as p2p interfaces and create only one route to ::1.
<li>Always call <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man9/rt_ifa_dellocal.9">rt_ifa_dellocal(9)</a> when removing an IPv6 address.
<!-- 2015-04-19 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping6.8">ping6(8)</a>, add a mac to the timestamp payload and calculate it with siphash (r1.119 and r1.121 from src/sbin/ping/ping.c).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping.8">ping(8)</a>, fold the icmp seq number into the mac.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>:
<ul>
<li>Support setting the default window and pane background colours.
<li>Rewrite of tmux mouse support which was a mess.
<li>Honour renumber-windows when unlinking a window.
</ul>
<li><font color="#e00000">5.5, 5.6 and 5.7 SECURITY FIX: logic error in smtpd handling of SNI.</font><br>A source patch is available for <a href="errata55.html#025_smtpd">5.5</a>, <a href="errata56.html#021_smtpd">5.6</a> and <a href="errata57.html#004_smtpd">5.7</a>.
<li>Fix incorrect logic in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/smtpd.8">smtpd(8)</a> that could lead to unexpected client disconnect, invalid certificate in SNI negotiation or server crash.
<li>Add support for x2apic mode. This is currently only enabled on hypervisors.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, if an explicit line break request (.br or .sp) occurs within an .HP block, the next line doesn't hang, but is simply indented.
<li>If <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/apropos.1">apropos(1)</a> finds no match, print "nothing appropriate" to stderr similar to what the old apropos did.
<li>Update to sqlite3 3.8.9.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping.8">ping(8)</a>:
<ul>
<li>Add a mac to the timestamp payload and calculate it with siphash.
<li>By default fill the ping payload with a chacha stream instead of an unvarying payload. By aggressively varying the payload we hope to generate more opportunities for dodgy network equipment to show errors.
</ul>
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/xhci.4">xhci(4)</a>, do not truncate possible remaining transfer length.
<li>Remove emulation of OSS audio ioctls from Linux emulation.
<li>Implement binary code patching on i386.
<!-- 2015-04-18 -->
<li>Enable th REG_READ ioctl.
<li>Don't lock the file for "vi -R" or "view".
<li>Work around what appear to be CPUID lies about the monitor-line size. This makes the mwait-based idle loop actually work.
<li>Convert many atoi() calls to strtonum() in userland, adding range checks and failure handling along the way.
<li>Remove kdriver/wscons code from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/Xserver.1">Xserver(1)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/systat.1">systat(1)</a> avoid calling freeifaddrs() uninitialised pointer in an error path.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>, strictly accept CRLF for newlines.
<!-- 2015-04-17 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/install.1">install(1)</a>, use futimens() to preserve timestamps with subsec precision.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/pf.4">pf(4)</a>, do not include padding of Ethernet packets in reassembled fragmented packets.
<li>In ssh, don't try to cleanup NULL KEX proposals in kex_prop_free().
<li>Change alpha mutexes so they record which cpu owns the lock rather than just if the lock is held or not.
<li>Remove the unsupported SADB_X_IDENTTYPE_CONNECTION, unused ipsp_parse_headers, and stubs and support code for NIC-enabled IPsec.
<li>Fix a crash in the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/bgpctl.8">bgpctl(8)</a> "network bulk" command.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ualea.4">ualea(4)</a>, crank the timeout and decrease the buffer size to not end up dropping all the entropy provided by the device. Also make sure we match the right endpoint.
<!-- 2015-04-16 -->
<li>Tweaks in utimensat/futimens handling:
<ul>
<li>Always update ctime, even when both atime and mtime are UTIME_OMIT (at least for ufs, tmpfs, and ext2fs).
<li>Correctly handle a timestamp of -1.
</ul>
<li>Don't call record_login() in monitor when UseLogin is enabled (bz#378).
<li>Add some missing options to sshd -T and fix the output of VersionAddendum HostCertificate (bz#2346).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, restore the page headers and page footers in the HTML output.
<li>Remove unfinished and unused support for socket-attached ipsec-policies.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pkg_add.1">pkg_add(1)</a>, expand the %a, %c, %m and %v sequences in PKG_PATH.
<li>Add <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ualea.4">ualea(4)</a> to support the Araneus Alea II TRNG.
<!-- 2015-04-15 -->
<li>Plug a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/sshd.8">sshd(8)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, fix some issues in bright colour handling.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/tls_close.3">tls_close(3)</a> more robust.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, fix setting old-style window -fg/-bg/-attr options that aren't global.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/tun.4">tun(4)</a>, fix a typo introduced in the niq_enqueue() conversion. This should fix a panic reported by many.
<li>Import libepoxy 1.2, a library for handling gl/glx/egl function pointer management. This is needed by glamor egl in the xserver which is in turn needed to get acceleration with some hardware on xf86-video-ati.
<!-- 2015-04-14 -->
<li>Update to xf86-video-ati 7.5.0.
<li>Make ipsp_address thread safe.
<li>Remove support for storing credentials and auth information in the kernel. This code is largely unfinished and is not used for anything.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/uchcom.4">uchcom(4)</a>, make sure we close the interrupt pipe when the device is detached.
<!-- 2015-04-13 -->
<li>Initialize RX/TX on <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/re.4">re(4)</a> slightly later. It appears that newer chips don't set up DMA correctly until more configuration has been done -- enabling RX too soon causes DMA to bad places.
<li>Perform IPsec bypass check on a socket before performing TDB lookups.
<!-- 2015-04-12 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sed.1">sed(1)</a>, correct a multiplication idiom during xreallocarray() and avoid an integer overflow.
<li>In ssh, deprecate the ancient, pre-RFC4419 and undocumented SSH2_MSG_KEX_DH_GEX_REQUEST_OLD message.
<li>Prevent use after free in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mg.1">mg(1)</a>.
<li>Let nl_langinfo(CODESET) return "US-ASCII" as the name of the character codeset for the POSIX/C default locale. This is the preferred IANA name and also used by FreeBSD.
<li>Update to xf86-video-intel 2.99.916. This fixes a display bug. Newer X.Org (2.99.917 or master) versions cause corruption on older machines (X40, i965), probably caused by a bug in our kernel. This is under investigation by kettenis@.
<li>Bring PAE code back to life on i386. More specifically, bring the PAE pmap on i386 closer to the current non-PAE pmap. This allows us to take a big next step toward better i386 W^X in the kernel (similar to what we did a few months ago on amd64). Unlike the original PAE pmap, this diff will not be supporting more than 4 GB physical memory on i386 -- this effort is specifically geared toward providing W^X (via NX) only. There still seems to be a bug removing certain pmap entries when PAE is enabled, so PAE mode is left disabled for the moment.
<li>Switch example NSD config to splitting master and slave zones into different subdirectories and create these in mtree.
<li>Disable the pool garbage collector. There are reports of strange lockups on various multiprocessor architectures and this is the only interesting diff in the window.
<!-- 2015-04-11 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/softraid.4">softraid(4)</a>, directly handle ioctls issued to a SCSI device associated with a softraid volume, ignoring any device name specified in the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/bio.4">bio(4)</a> ioctl struct. Amongst other things, this makes bioctl -d now work with DUIDs.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/softraid.4">softraid(4)</a>, re-enable the RAID 5 discipline and add support for restarting rebuilds on it.
<li>Remove OPENSSL_issetugid() from LibreSSL. By default on systems lacking true issetugid(), OPENSSL_issetugid() returns 0, falsely indicating safety. This means OPENSSL_issetugid() fails to make any sort of promise about safety, in fact it is just the opposite.
<li>Update to xf86-input-synaptics 1.8.2.
<li>Remove all getenv() calls in LibreSSL, especially those wrapped by issetugid(). getenv()'s wrapped by issetugid() are safe, but issetugid() is difficult to implement on many operating systems.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>, always check the return value of proc_composev_imsg() and handle failures appropriately. Otherwise imsg construction can silently fail, resulting in non-obvious problems.
<!-- 2015-04-10 -->
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/vi.1">vi(1)</a> use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/resizeterm.3">resizeterm(3)</a> instead of reinitializing curses on window resizes, which was leaking massive amounts of memory.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, add a -x flag to copy-selection, append-selection and start-named-buffer to prevent it exiting copy mode after copying.
<li>Replace the use of ifqueues for most input queues serviced by netisr with niqueues.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ehci.4">ehci(4)</a>, implement full-speed isochronous transfers support with opportunistic micro-frames scheduling. More work is required to properly budget and schedule micro-frames, most of it at the HUB level. But this let people use USB1.1 uaudio(4) devices on ehci(4)-only systems.
<li>Add support for CRC-enabled elantech v3 touchpads to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/pms.4">pms(4)</a>.
<!-- 2015-04-09 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh.1">ssh(1)</a>, don't send hostkey advertisments (hostkeys-00@openssh.com) to current versions of Tera Term as they can't handle them. Newer versions should be OK.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/vlan.4">vlan(4)</a>, don't inherit the parent interface's hardmtu as the vlan interface's mtu when it gets set up. Instead, allow the vlan interface's mtu to be raised to the parent's hardmtu in SIOCSIFMTU handling.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/zmore.1">zmore(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/zless.1">zless(1)</a>, accept options starting with "+".
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/whois.1">whois(1)</a>, improve the lookup of gTLDs.
<li>Make the sparc64 pmap (more) mpsafe by protecting both the pmap itself and the pv lists with a mutex.
<li>Plug a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/pf.4">pf(4)</a>.
<!-- 2015-04-08 -->
<li>Fix a regression on <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/re.4">re(4)</a> chips that have 7k jumbo support.
<li>Move vmap back to kernel_map/uvm_km_valloc as it's allowed to fail. This should fix the Dell 2950 when it gets stuck during boot.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/socppc/tsec.4">tsec(4)</a>, prevent the watchdog from firing when no cable is plugged in but the interface is brought up.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/iwn.4">iwn(4)</a>, don't leak the chip's hardware address during scans when a randomized address is set by the user.
<!-- 2015-04-07 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tmux.1">tmux(1)</a>, when replacing, don't free the old paste until after the new one's name has been copied. This fixes a use-after-free in window-copy.c.
<li>Introduce a garbage collector for (very) idle pool pages.
<!-- 2015-04-06 -->
<li>Remove the obsolete <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-5.6/man3/timezone.3">timezone(3)</a> function.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/pthread_atfork.3">pthread_atfork(3)</a> track the DSO that called it like <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/atexit.3">atexit(3)</a> does, unregistering callbacks if the DSO is unloaded. Move the callback handling from libpthread to libc, though libpthread still overrides the inner call to handle locking and thread-library reinitialization.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, do not mistreat empty arguments to font alternating macros as vertical spacing requests.
<li>Remove DES support from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/crypt.3">crypt(3)</a>.
<li>Add support for an efi-app-x86_64 target to binutils. This is needed for UEFI bootloader work.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, use the default width for .RS without arguments. This reduces groff-mandoc differences in base and Xenocara by about 4%.
<li>Update to xcb-util 0.4.0, xcb-util-image 0.4.0, xcb-util-keysyms 0.4.0, libXxf86vm 1.1.4, libXvMC 1.0.9, libXdmcp 1.1.2 and libX11 1.6.3.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pkg_info.1">pkg_info(1)</a>, check that the info of distant packages is signed.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pkg_add.1">pkg_add(1)</a>,
mark installed locations as "trusted" so that pkg_info does not check sigs
on them.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/realloc.3">realloc(3)</a>, when expanding a region, actually use the free page cache instead of simply zapping it. This can save many syscalls in a program that repeatedly grows and shrinks a buffer.
<!-- 2015-04-05 -->
<li>Work-in-progress support for non-accelerated X11 on <em>some</em> <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/sti.4">sti(4)</a> frame buffers; based upon the old HP ngle X11 driver. Currently limited to CRX (720/735/750), Timber (710, old 715), Artist (712, 715) and EG (B-series). However, the colormap isn't set up correctly on Timber and EG yet.
<li>Various improvements to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sort.1">sort(1)</a>:
<ul>
<li>Do not permute command line arguments, but still support the obsolescent "-o outfile" after input files syntax.
<li>The -b flag should only apply when key fields are specified. If -b follows -k it has no effect.
<li>For the -g flag, treat non-floating point keys as 0, similar to -n. This makes "sort -gu" and "sort -nu" behave similarly and passes our sort regress tests.
</ul>
<!-- 2015-04-04 -->
<li>Update to sqlite3 3.8.8.3.
<li>Give <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man7/man.7">man(7)</a> section and subsection headers hanging indentation. This reduces groff-mandoc differences in base by about 2.5%.
<li>Better implementation of rounding rules in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>.
<li>Show the remote labels in the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ldpctl.8">ldpctl(8)</a> "show lib" command even if they are not installed in the FIB.
<li>Remove lo protection in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ldpd.8">ldpd(8)</a>. There's no need to protect the 127/8 network since it is filtered before being sent to lde.
<li>Show the full LIB in the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ldpctl.8">ldpctl(8)</a> "show lib" command.
<li>Add support for commit ids to "opencvs status".
<li>Fix the modified timestamp in the output of "opencvs status".
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, don't allow breaking the output line after hyphens following escape sequences. Improves tic(1), sxpm(1) and a few Perl manuals.
<li>Use config_suspend() instead of dereferencing ca_activate directly to support drivers that do not need any specific suspend/resume magic and do not have an activate function. This is needed at least by <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/macppc/kauaiata.4">kauaiata(4)</a>.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, fix a quirk with respect to an empty .HP.
<!-- 2015-04-03 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/sti.4">sti(4)</a>, fix an unsigned vs signed comparison causing an infinite loop for the WSDISPLAYIO_PUTCMAP ioctl.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sort.1">sort(1)</a>:
<ul>
<li>If -S has been supplied multiple times, only take last one into account.
<li>If -c (or -C) has been specified, only perform that action and ignore -o among other arguments.
<li>Allow only one input file with the -c and -C flags.
</ul>
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/apropos.1">apropos(1)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/man.1">man(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, don't hardcode /usr/bin/ as the path to more(1).
<!-- 2015-04-02 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sort.1">sort(1)</a>, prevent an integer overflow when parsing the -S argument as percentage. Also make sure that the parsed memory amount won't be larger than SIZE_MAX to properly support 32-bit systems.
<li>Change gcc and ld semantics to make static PIE the default when invoking "cc -static".
<!-- 2015-04-01 -->
<li>Many improvements to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sort.1">sort(1)</a>, including:
<ul>
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/strtonum.3">strtonum(3)</a> to parse the argument to --batch-size.
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/mkstemp.3">mkstemp(3)</a> to generate a new temporary file name.
<li>Use <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/reallocarray.3">reallocarray(3)</a> where appropriate.
<li>Prevent a tiny signal race by blocking signals when inserting into the tmp_files list.
<li>Check for overflow when handling buffer size suffixes.
</ul>
<li>Run most of the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/sparc64/vnet.4">vnet(4)</a> interrupt handler without holding the kernel lock.
<!-- 2015-03-31 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>, zero the tls cert/key length variables when inheriting a server configuration for multiple listen statements in a server block. Otherwise httpd(8) will crash when a listen statement with tls is followed by a listen statement without tls.
<li>Prevent <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh.1">ssh(1)</a> from warning about SSH1 keys present when compiled without SSH1 support. Also identify SSH1 keys when scanning, even when compiled without SSH1 support.
<li>Fix an fd leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh.1">ssh(1)</a>.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sort.1">sort(1)</a> ignore $TMPDIR if setuid or setgid.
<li>Don't make the -m and -c options of <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sort.1">sort(1)</a> mutually exclusive.
<li>Let the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/vlan.4">vlan(4)</a> mtu be limited by the parent's hard mtu, not the current mtu. This makes it possible to have networks on the "native" (untagged) vlan on an interface at 1500, while setting a child vlan interface's mtu to jumbos.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sort.1">sort(1)</a>:
<ul>
<li>Call atexit() to clean up temporary files on error.
<li>Use mkstemp() to create the temporary file when the output file equals one of the input files.
<li>Preserve the original file mode on the temporary file.
<li>Check for write access on the original file before creating the temporary one.
</ul>
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh-keygen.1">ssh-keygen(1)</a>, if a user tries to add a comment to a non-RSA1 key and has entered their passphrase, explicitly clear it before exit.
<li>Tell the firmware to shut down the fan management thread on the last generation of G5s. Without this mpi@'s PowerMac11,2 hang when smu(4) attaches.
<li>Move the default font path from /usr/local/lib/X11/fonts to /usr/local/share/fonts to match XDG_DATA_DIR (where Desktop tools will look for by default).
<!-- 2015-03-30 -->
<li>Fix the repeating keys/delay problem that occurs on newer ThinkPads when touching the trackpad/trackstick while typing during the installer in a less invasive way.
<li>Update to xkeyboard-config 2.14.
<li>Some work on macppc G5 interrupts.
<li>Allow <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/syslogd.8">syslogd(8)</a> to read configuration files with arbitrary line lengths. Also ensure the configuration file has been read in full in order to prevent syslogd(8) from running with incomplete configuration.
<li>Update to xcb-util-cursor 0.1.2.
<!-- 2015-03-29 -->
<li>Fix an uninitialised memory read in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh.1">ssh(1)</a> when parsing a config file consisting of a single nul byte.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, handle special punctuation modes for -Tpdf.
<li>Restore user-loaded vga fonts upon switching from X11 to VT and upon resume.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/sparc64/esp.4">esp(4)</a> correctly match SUNW,fas in the boot path.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/tcpdump.8">tcpdump(8)</a>, remove an extra line when printing AH and RIP packets.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/sparc64/vnet.4">vnet(4)</a> reject packets that are too large.
<li>Revert r1.29 of src/usr.bin/telnet/sys_bsd.c (don't clear ICRNL when editing mode is off, so that character local echo mode don't echo ^M locally) as this causes problems sending CR to some Cisco equipment.
<li>Make sure that <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pkg_add.1">pkg_add(1)</a> checks specialfiles.
<!-- 2015-03-28 -->
<li>Initial support for the SABRE SD board.
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cwm.1">cwm(1)</a>.
<li>Match <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/rtsx.4">rtsx(4)</a> on the RTS5249 found on the Dell XPS 13 and treat it as an RTS5229.
<!-- 2015-03-27 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ntpd.8">ntpd(8)</a>, avoid overflow on 32-bit time_t systems when converting timeval to NTP time.
<li>For ancient pre-v8 sparc, expand kva.
<li>Move <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/man.conf.5">man.conf(5)</a> from /etc/ to /etc/examples.
<li>Add the "output" directive to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/man.conf.5">man.conf(5)</a>.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/security.8">security(8)</a> handle lines in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/mount.8">mount(8)</a> output that end with "on" (which can happen for NFS mounts).
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/security.8">security(8)</a> handle incomplete lines in /etc/passwd that end before the home directory field.
<!-- 2015-03-26 -->
<li>Add the "manpath" directive to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/man.conf.5">man.conf(5)</a> to override the default search path.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pkg_add.1">pkg_add(1)</a>, backout -DSHORTENED semantics by default for now.
<li>Add initial support for RFC 7427 signatures to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/iked.8">iked(8)</a>.
<li>Allow input/printing/conversion of terabyte sizes in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/fdisk.8">fdisk(8)</a>.
<li>Fix configuring MPLS routes on <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/mpe.4">mpe(4)</a>.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a> translate CGI environment variables in accordance with RFCs 7230 and 3875.
<li>Ban all-zero curve25519 keys in ssh, as recommended by the latest CFRG curves draft.
<li>Update to libdrm 2.4.60.
<!-- 2015-03-25 -->
<li>Determine if the trackstick buttons are wired to the trackpad and need to be re-routed to the trackstick. Without this change the buttons on 2015 Thinkpads get picked up as extended buttons that show up as scroll up/down. Remove the X1 Carbon 2015 (LEN0048) and X250 (LEN0046) from the top button area/soft buttons quirks list. Also avoid using the quirk list entirely if the capability bit is set.
<li>Save/restore AVX registers and other XSAVE-managed state information when entering/leaving a signal handler like we already do the the FPU and SSE state. This should make it possible to use AVX instructions in signal handlers.
<li>Ignore v1 errors on <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh-add.1">ssh-add</a> -D; only try v2 keys on -l/-L (unless compiled with SSH1 support).
<li>With a per interface IPv6 stateless adress auto configuration flag it is possible to allow IPv6 forwarding and SLAAC at the same time. This is needed for RFC 7084.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ksh.1">ksh(1)</a>, bind the Delete key (ESC[3~) to delete-char-forward.
<!-- 2015-03-24 -->
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-5.6/man1/ssh.1">ssh(1)</a>.
<li>Work around broken device-tree in PowerMac7,2 and PowerMac7,3 (K2 systems) and get the correct offsets from the "i2s" node.
<li>Remove <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-5.6/man4/lmc.4">lmc(4)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-5.6/man4/san.4">san(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-5.6/man8/lmccontrol.8">lmccontrol(8)</a>.
<li>Use chacha20-poly1305@openssh.com as the default cipher in ssh.
<!-- 2015-03-23 -->
<li>Disable SSH protocol 1 in ssh.
<li>Fix a memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/relayd.8">relayd(8)</a>.
<li>Don't let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/rcmdsh.3">rcmdsh(3)</a> fail if it is passed a non resolvable hostname. Instead, silently ignore the fact and instead let the underlying ssh (or $RSH) command handle it.
<li>Fix memory leaks in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/tempnam.3">tempnam(3)</a> error paths.
<li>Fix NFS boot on macppc.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping6.8">ping6(8)</a>, bump the size of the time types on the wire to 64 bit (port of r1.116 of src/sbin/ping/ping.c).
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping.8">ping(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping6.8">ping6(8)</a>, obfuscate the monotonic clock values put on the wire by offsetting them with a random value.
<li>Don't let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ssh-keygen.1">ssh-keygen</a> -A try (and fail) to generate ssh v.1 keys when compiled without SSH1 support RSA/DSA/ECDSA keys when compiled without OpenSSL (bz#2369).
<!-- 2015-03-22 -->
<li>Make setting 11a rates and scanning on <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/iwm.4">iwm(4)</a> conditional on the 5GHz support bit in the nvm. <li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/sparc/be.4">be(4)</a> work on sun4c.
<!-- 2015-03-21 -->
<li>Add sysconf() extensions PHYS_PAGES, AVPHYS_PAGES, NPROCESSORS_CONF
and NPROCESSORS_ONLN to <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/getconf.1">getconf(1)</a>.
<li>On amd64, add support for saving/restoring FPU state using the XSAVE/XRSTOR. Limit support to the X87, SSE and AVX state. This gives us (almost) full AVX support.
<li>On sparc, abort attach of iommu requiring boards on non-iommu systems.
<li>Don't let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ldpd.8">ldpd(8)</a> try to send address withdraws to neighbors that are unreachable after an address removal in the system.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ldpd.8">ldpd(8)</a> remove attached adjacencies whenever an interface is disabled for whatever reason. This will speed up the convergence process.
<li>Don't let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ldpd.8">ldpd(8)</a> assign labels for BGP routes. This would be very resource consuming in some scenarios and unnecessary.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/sparc64/vnet.4">vnet(4)</a>, considerably improve the reliability of re-establishing network connections between domains after some sort of hickup.
<li>Let <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/man.1">man(1)</a> fall back to /usr/share/man:/usr/X11R6/man:/usr/local/man as default search path if no path is given via -m, -M, $MANPATH and /etc/man.conf.
<li>Fix a memory leak in libtls with repeated use of tls_connect().
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sort.1">sort(1)</a>, use the hw.usermem sysctl to determine the amount user (non-kernel) memory instead of sysconf(_SC_PHYS_PAGES) (which also counts pages wired by the kernel). Don't try to use a memory buffer larger than the datasize hard resource limit.
<!-- 2015-03-20 -->
<li>Work around buggy AML trying to access PCI config space using PCI function number FFFF.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/renice.8">renice(8)</a>, when mixing historic BSD syntax (where the priority is absolute) with the -n flag (where the priority, according to POSIX, is an increment), the increment specified via -n will only affect the entries that follow it.
<li>Support jumbo frames on <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/re.4">re(4)</a>.
<li>Rather than disabling checksum offload in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/re.4">re(4)</a> for all packets, let it advertise checksum offload to the stack for small (normal-sized) packets and do the checksum itself in software for large packets.
<li>Reintroduce r1.173 of src/sys/kern/subr_pool.c (try and place at least 8 items on a page if we're able to use large page allocators). This was backed out because of fallout on landisk which has since been fixed.
<li>Unbreak WEP/WPA on AR5211 <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ath.4">ath(4)</a> devices by setting hardware WEP keytable entry types to NULL, as done for AR5212 devices. ath(4) uses software crypto.
<li>Re-apply r1.115 of src/sys/dev/pci/if_ix.c (when setting up advanced TX descriptor, use m_getptr to locate the IP or IPv6 header instead of assuming contiguousness of the target buffer across Ethernet and IP/IPv6 headers) that got accidentally reverted.
<!-- 2015-03-19 -->
<li>Fix a memory leak in an error path in LibreSSL (from OpenSSL commit 5e5d53d341fd9a9b9cc0a58eb3690832ca7a511f).
<li>Fix a small memory leak in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sort.1">sort(1)</a>.
<li><font color="#e00000">5.6 and 5.7 SECURITY FIX: several crash causing defects in OpenSSL (CVE-2015-0209, CVE-2015-0286, CVE-2015-0287, CVE-2015-0288 and CVE-2015-0289).</font><br>A source code patch is available for <a href="errata56.html#020_openssl">5.6</a> and <a href="errata57.html#003_openssl">5.7</a>.
<li><font color="#e00000">5.5 SECURITY FIX: two possible crash causing defects in OpenSSL (CVE-2015-0286 and CVE-2015-0292).</font><br>A source code patch is available for <a href="errata55.html#024_openssl">5.5</a>.
<li>Fix CVE-2015-0209, CVE-2015-0286, CVE-2015-0287 and CVE-2015-0289 in LibreSSL.
<li>Deal with half-configured control pipes in dwc2, using the same workaround as in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ehci.4">ehci(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ohci.4">ohci(4)</a>.
<!-- 2015-03-18 -->
<li>Use struct timespec internally in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pax.1">pax(1)</a>. This gives nanosecond precision to the -rw option and a basis for support of mtime and atime values in pax-format extended header records.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/route.8">route(8)</a>, instead of embedding interface names in a sockaddr, use their indexes when adding route entries with the -link option. This prevent the ARP layer to take the name of your interface for an Ethernet address.
<li>Rework the virtual memory layout on SRMMU systems (sun4d/sun4m) to use a much lower VM_MIN_KERNEL_ADDRESS, since these systems are not crippled by the Sun-4 MMU hole and have the real 4GB of address space. Kernels running on Sun-4 MMU are not affected and will still be restricted to the existing 128MB of kernel space, with 1GB - 128MB of user space.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/init.8">init(8)</a> static PIE.
<li>Revert r1.52 of src/sys/arch/sparc/dev/zs.c. This reduces the number of spurious zs interrupts seen on sun4c, albeit not completely.
<li>Speed up large directory reading with <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man3/opendir.3">opendir(3)</a>.
<li>Fix <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/mpii.4">mpii(4)</a> on i386.
<!-- 2015-03-17 -->
<li>Reenable the pa1.1 fallback code for sha256 on hppa.
<li>"Handle" wccp2 packets if net.inet.gre.wccp is set to 2 by truncating skipping the wccp 2 header.
<li><font color="#e00000">5.5, 5.6 and 5.7 SECURITY FIX: buffer overflows in libXfont (CVE-2015-1802, CVE-2015-1803 and CVE-2015-1804).</font><br>A source code patch is available for <a href="errata55.html#023_libxfont">5.5</a>, <a href="errata56.html#019_libxfont">5.6</a> and <a href="errata57.html#002_libxfont">5.7</a>.
<li>Update to libXfont 1.5.1 which contains fixes for CVE-2015-1802, CVE-2015-1803 and CVE-2015-1804.
<li>Fix swap auto-allocation in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/disklabel.8">disklabel(8)</a> for machines with very little memory.
<li>Replace <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sort.1">sort(1)</a> with the implementation from FreeBSD.
<li>In the installer, don't ask about xdm if the answer to the X question was "no" (restores previous behaviour that got lost in r1.780 of src/distrib/miniroot/install.sub).
<li>Prevent a race in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/ehci.4">ehci(4)</a> resulting in an infinite loop printing "ehci_idone" messages.
<li>Fix erratic behaviour of <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/dig.1">dig(1)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/nslookup.1">nslookup(1)</a> when no (valid) nameserver is configured in resolv.conf.
<li>Explicitly handle SIGPIPE in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>. This prevents a "Broken pipe" message from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/csh.1">csh(1)</a>.
<!-- 2015-03-15 -->
<li>Repair a missing state insert in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/pf.4">pf(4)</a>.
<li>Try a third approach for handling pms and pckbd interrupt storms, when there is no pms driver in the kernel.
<li>Update to sqlite3 3.8.7.4.</li>
<li>Avoid a NULL pointer dereference in LibreSSL. A NULL pointer could be dereferenced when X509_REQ_set_pubkey() calls X509_PUBKEY_set() with pktmp. According to OpenSSL, this is the fix for CVE-2015-0288.
<li>Prevent a use-after-free in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a>.
<li>Allow the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/xdm.1">xdm(1)</a> greeter to set the background color of the input fields. The "inpColor" resource is used for that.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>, avoid off-by-one read access to the termacts array, which could
sometimes result in missing line breaks before subsection headers.
<!-- 2015-03-14 -->
<li>In the installer, eliminate the question "Which cd?" and just show the available cd's in the "Location of sets?" prompt.
<li>Allow for multiple concurrent devopen() calls, and fill the .readdir member
of fs_ops. This makes the "ls" command finally work in the macppc bootloader.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/last.1">last(1)</a>, use ctime_r to avoid a re-entrancy signal race.
<li>Check for the size of the supposed destination address when constructing the Ethernet frame. This prevents an overflow.
<li>The RTL8411 is supported by <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/rtsx.4">rtsx(4)</a>.
<li>Rewrite the <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/sh.1">sh(1)</a> manual page and confine it to document features supported by POSIX-compliant shells.
<!-- 2015-03-13 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ospfd.8">ospfd(8)</a>, wen removing interfaces in the RDE, also remove all the RDE neighbors that are part of that interface. This prevents use-after-free situations.
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/wi.4">wi(4)</a> on PCMCIA work on luna88k.
<!-- 2015-03-12 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/makewhatis.8">makewhatis(8)</a>, fix hardlink detection on platforms having padding in struct inodev, typically 64-bit platforms.
<li>Use the shorter ofwbootfd (without softraid support) on the miniroot. This fixes booting of cdNN.iso and installNN.iso on the Blade 150.
<li>Make "boot -c" support work on a variety of newer machines. This is not expected to harm older machines.
<li>Handle the way some BIOSes initialize newer-style nubbins/touchpads into strange (advanced) modes, which can muddle up the pckbc pipe. This is experienced as 10-second typing pauses and strange repeat behaviour on the RAMDISK (and is caused by "lightly brushing" the touchpad).
<li>Automatic parent interface selection no longer works in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ifconfig.8">ifconfig(8)</a> (see r1.245 of src/sys/netinet/ip_carp.c); carpdev is a required argument now.
<li>Escape ! characters for tab completion in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/ksh.1">ksh(1)</a>. This is necessary if using "set -o csh-history".
<!-- 2015-03-11 -->
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pax.1">pax(1)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tar.1">tar(1)</a>, try to recognize a few well-known compression formats, and report them to the user.
<li>Remove setgid kmem support from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/systat.1">systat(1)</a>. As a result, the netstat view of systat is slightly different.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-5.6/man8/ping.8">ping(8)</a>, bump the size of the time types on the wire to 64 bit.
<li>Remove <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-5.6/man1/tcopy.1">tcopy(1)</a>.
<li>Remove setgid kmem support from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/eeprom.8">eeprom(8)</a>. As a result, groot privileges are generally needed to run this.
<li>Remove setgid kmem support from <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/pstat.8">pstat(8)</a>. As a result, root privileges are needed to use the -d and -v options.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/man.1">man(1)</a>, when interpreting the -O argument as a macro name fails, fall back to showing Nd rather than not showing anything.
<li>The 3160 should work with <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/iwm.4">iwm(4)</a>.
<!-- 2015-03-10 -->
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping.8">ping(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ping6.8">ping6(8)</a>, <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/traceroute.8">traceroute(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/traceroute6.8">traceroute6(8)</a> resistant to local wall clock changes which can skew the intervals reported or make them go negative.
<li>Add back r1.206 of src/usr.bin/ssh/packet.c that fixed some leaks in error paths and was reverted by mistake.
<li>Set verbosity to 1 (the default is 0) in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/nsd.conf.5">nsd.conf(5)</a> so that incoming notifies and zone xfers are logged.
<li>Improve locking in amd64 pmap using mutexes.
<li>Disable the database file by default in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/nsd.conf.5">nsd.conf(5)</a>. It is believed to be a saner default for the common use case and there is a problem with missing records on shutdown.
<!-- 2015-03-09 -->
<li>Fix a regression in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/man.1">man(1)</a> where the first manual shown is not properly displayed in the pager if that manual is compressed.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/vi.1">vi(1)</a>, display "Search wrapped" even when searching from the end of the file.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man4/wdc.4">wdc(4)</a>, do not attempt to read the status register unless WDCF_IRQ_WAIT is not set; this used to be the case but got broken in r1.113. This fixes the Acard ATP865-R.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man6/worm.6">worm(6)</a>, make the worm grow faster on larger terminals. This is more fun than starting with an enormous pile of worm at the start.
<li>Don't do IPv6 SLAAC for prefixes with a preferred lifetime of zero, per RFC 4941.
<li>In <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/mandoc.1">mandoc(1)</a>:
<ul>
<li>Fix vertical spacing at the beginning of tables: <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man7/man.7">man(7)</a> always prints a blank line; <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man7/mdoc.7">mdoc(7)</a> doesn't.
<li>Don't mistreat negative .sp arguments in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man7/mdoc.7">mdoc(7)</a> as large positive ones.
Instead, use the same logic as for <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man7/man.7">man(7)</a>.
<li>Flush the line preceding a table before clearing the right margin, so that that line isn't output with unlimited width.
</ul>
<li>Make <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/httpd.8">httpd(8)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/relayd.8">relayd(8)</a> TLSv1.2-only by default.
<li>Make -DSHORTENED the default in <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pkg_add.1">pkg_add(1)</a>.
<li>Move i386 pvlists to pool backed, and improve the locking using mutexes.
<!-- 2015-03-08 -->
<li>Various fixes for <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/cpio.1">cpio(1)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/pax.1">pax(1)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man1/tar.1">tar(1)</a>:
<ul>
<li>Prevent an archive from escaping the current directory by itself.
<li>For tar without -P, if a path in the archive has any ".." components, then strip everything up to and including the last of them (if it ends in ".." then it becomes ".").
<li>For directories whose times or mode will be fixed up in the clean-up pass, record their dev+ino and then use open(O_DIRECTORY)+fstat() to verify that we're updating the correct directory before using futimens() and fchmod().
<li>Correct buffer overflow in handling of pax extension headers, caught by the memcpy() overlap check.
</ul>
</ul>
<p>


</body>
</html>

