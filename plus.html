<!doctype html>
<html lang=en id=plus>
<meta charset=utf-8>
<title>OpenBSD -current Changelog</title>
<meta name="description" content="OpenBSD -current changes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/plus.html">
<style>
strong {
	color: var(--red);
	font-weight: normal;
}

h3 {
	color: var(--blue);
}
</style>

<h2 id=OpenBSD>
<a href="index.html">
<i>Open</i><b>BSD</b></a>
-current Changelog
</h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="mail.html#Archives">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<br>
<a href="plus54.html">5.4</a>,
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>,
<a href="plus59.html">5.9</a>,
<a href="plus60.html">6.0</a>,
<a href="plus61.html">6.1</a>,
<a href="plus62.html">6.2</a>,
<a href="plus63.html">6.3</a>,
<a href="plus64.html">6.4</a>,
<a href="plus65.html">6.5</a>,
<a href="plus66.html">6.6</a>,
<a href="plus67.html">6.7</a>.
<br>

<p>
<h3>Changes made between OpenBSD 6.7 and -current</h3>
<p>

<ul>
<!-- 2020/06/11 -->
<li>Added a <a href="https://man.openbsd.org/tmux">tmux(1)</a> -A option to pause a pane manually.
<!-- 2020/06/10 -->
<li>Added <a href="https://man.openbsd.org/escodec">escodec(4)</a>, a driver for the Everest ES8316 audio codec used on the Pinebook Pro.
<li>Added <a href="https://man.openbsd.org/rkiis">rkiis(4)</a>, a driver for the I25 controller found on the Rockchip RK3399.
<li>Added <a href="https://man.openbsd.org/simpleamp">simpleamp(4)</a>, a driver for "simple audio amplifier," one of the aux devices for <a href="https://man.openbsd.org/simpleaudio">simpleaudio(4)</a>.
<li>Added <a href="https://man.openbsd.org/simpleaudio">simpleaudio(4)</a>, a driver for "simple audio cards." This is a wrapper connecting the I25 controller, the codec and some aux devices.
<li>Introduced a framework for digital audio interfaces.
<li>Populated a list of 256 brightness levels as a fallback when the device tree does not specify a list, making the Pinebook Pro display work with the dtb from Linux 5.7.
<li>Updated <a href="https://man.openbsd.org/awk">awk(1)</a> through the June 5, 2020 version.
<li>Provided an optimized implementation of <a href="https://man.openbsd.org/ffs">ffs(3)</a> in the kernel on arm64/powerpc/powerpc64.
<li>Added <a href="https://man.openbsd.org/cwfg">cwfg(4)</a>, a driver for the Cellwise CW201x fuel gauge on the Pinebook Pro.
<li>Added <a href="https://man.openbsd.org/opal">opal(4)</a>, a driver that interacts with the OPAL firmware on powerpc64 and implements RTC functionality.
<!-- 2020/06/09 -->
<li>Added IBM POWER9 host bridge <a href="https://man.openbsd.org/pci">pci(4)</a> id.
<li>Prevented <a href="https://man.openbsd.org/rcs">rcs(1)</a> removal of locked revisions with rcs -orange, avoiding leaving behind a lock for a revision which no longer exists.
<!-- 2020/06/08 -->
<li>Added Intel 200 Series HD Audio <a href="https://man.openbsd.org/pci">pci(4)</a> id.
<li>Prevented a use-after-free when a wireless device is detached.
<li>Updated <a href="https://man.openbsd.org/drm">drm(4)</a> to linux 5.7.
<!-- 2020/06/07 -->
<li>Added Marvel 88SE9215 and 88SE9235 AHCI <a href="https://man.openbsd.org/pci">pci(4)</a> ids.
<li>Prevented callers inspecting unrelated fields in the libc resolver function asr_run().
<!-- 2020/06/06 -->
<li>Moved Powerbook5,4 audio from <a href="https://man.openbsd.org/aoa">aoa(4)</a> to <a href="https://man.openbsd.org/snapper">snapper(4)</a>, adding the missing TAS3004 volume control.
<!-- 2020/06/05 -->
<li>Added <a href="https://man.openbsd.org/ssl">ssl(8)</a> support for additional GOST curves and aliases for 256-bit GOST curves.
<li>Added support for pausing a <a href="https://man.openbsd.org/tmux">tmux(1)</a> pane when the output buffered for a control mode client is too far behind, controllable with refresh-client -f and -A.
<!-- 2020/06/04 -->
<li>Prevented the HID parser from overflowing if a malicious device provides too many PUSH.
<li>Added support for the Cortex-A78 cpu.
<li>Improved TLSv1.3 client certificate selection to allow use of EC certificates.
<li>Fixed <a href="https://man.openbsd.org/pf.conf">pf.conf(5)</a> "route-to TABLE least-states" in an anchor.
<!-- 2020/06/03 -->
<li>Updated <a href="https://man.openbsd.org/perl">perl(1)</a> to 5.30.3.
<!-- 2020/06/02 -->
<li>Introduced <a href="https://man.openbsd.org/acpihid">acpihid(4)</a> for ACPI HID event and 5-button array devices.
<li>Added support for hardware vlan tagging to <a href="https://man.openbsd.org/mcx">mcx(4)</a>.
<!-- 2020/06/01 -->
<!-- 2020/05/31 -->
<li>Added an SK hynix NVMe <a href="https://man.openbsd.org/pci">pci(4)</a> id.
<li>Released <a href="https://ftp.openbsd.org/pub/OpenBSD/LibreSSL/libressl-3.2.0-relnotes.txt">LibreSSL</a> 3.2.0.
<li>Added <a href="https://man.openbsd.org/umstc">umstc(4)</a>, a driver for Microsoft Surface Type Cover keyboards.
<li>Began looking for non-expired certificates first when building a chain, making certificate validation possible for various sites that are serving expired AddTrust certificates.
<!-- 2020/05/30 -->
<li>Improved CPU frequency scaling in automatic performance mode by removing accounting for offline CPUs.
<!-- 2020/05/29 -->
<li>Added to <a href="https://man.openbsd.org/ssh_config">ssh_config(5)</a> a selection of keywords allowed to expand shell-style ${ENV} environment variables on the client side.
<li>Adjusted to complete group key renewal immediately if no station is associated when ieee80211_proto.c runs.
<li>Prevented a panic where <a href="https://man.openbsd.org/athn">athn(4)</a> attempted to transmit old, unencryptable frames after switching to a new group key in hostap mode.
<!-- 2020/05/28 -->
<li>Enabled building <a href="https://man.openbsd.org/wsmoused">wsmoused(8)</a> and <a href="https://man.openbsd.org/wsfontload">wsfontload(8)</a> on arm64 and armv7.
<li>Fixed display glitches on smaller screens or with larger fonts in <a href="https://man.openbsd.org/efifb">efifb(4)</a> associated with remapping and attaching.
<li>Enabled scrollback in <a href="https://man.openbsd.org/simplefb">simplefb(4)</a>.
<li>Prevented unconditional initialization of VGA on amd64 boot causing video distortion.
<!-- 2020/05/27 -->
<li>Corrected <a href="https://man.openbsd.org/getopt_long">getopt_long(3)</a> parsing of a trailing dash in an option group, which was being incorrectly returned as an argument.
<!-- 2020/05/26 -->
<li>Removed <a href="https://man.openbsd.org/mail.local">mail.local(8)</a> support for world-writable mail spools.
<li>Added AES-GCM mode ciphers for IKEv2, configurable in <a href="https://man.openbsd.org/iked.conf">iked.conf(5)</a> with the new "ikesa enc" options aes-128-pcm, aes-256-gcm, aes-128-gcm-12 and aes-256-gcm-12.
<li>Rewrote the entropy enqueue ring to collect damage asynchronously and adapted the dequeue to mix a selection of "best" ring entries, exponentially backing off the dequeue timeout, to compensate rapidly for weak seeding in unidentifiable conditions and ensure quality to arc4random() calls early in boot.
<li>Introduced detection of /etc/random.seed reuse.
<li>Reworked kernel loading with <a href="https://man.openbsd.org/octboot">octboot(4)</a>, which now does not rely on a mounted filesystem.
<li>Prevented a fatal <a href="https://man.openbsd.org/iwx">iwx(4)</a> firmware error when the driver moves out of AUTH state.
<li>Rewrote m88k mutex code as a slight variation of the MI mutex code, potentially improving stability and rendering mutex spinning time visible in <a href="https://man.openbsd.org/top">top(1)</a>.
<li>Allowed passage of unencrypted 802.11 frames during hardware decryption post-processing, fixing failure of some <a href="https://man.openbsd.org/ral">ral(4)</a> devices to receive packets on encrypted networks.
<li>Added support to <a href="https://man.openbsd.org/urtwn">urtwn(4)</a> for TP-Link TL-WN822N-EU v5 (and v4).
<!-- 2020/05/25 -->
<li>Restricted <a href="https://man.openbsd.org/ssh-agent">ssh-agent(1)</a> from signing web challenges for FIDO keys, preventing ssh-agent forwarding on a host that has FIDO keys attached from granting the ability for the remote side to also sign challenges for web authentication using those keys.
<li>Increased the default number of ldom and ttyV devices for sparc64 from eight to sixteen.
<li>Passed boothowto from the sparc64 bootloader to the kernel using .openbsd.bootdata.
<li>Added <a href="https://man.openbsd.org/wsmoused">wsmoused(8)</a> support to <a href="https://man.openbsd.org/efifb">efifb(4)</a>.
<li>Added support for the ThingM blink(1) USB notification light.
<li>Stopped <a href="https://man.openbsd.org/syslogd">syslogd(8)</a> from closing UDP sockets for sending messages when DNS lookup of a UDP loghost fails, alloiwing them to be used to send if DNS is working during the next SIGHUP.
<li>Made non-root filesystems FFS2 for landisk, sgi and luna88k.
<!-- 2020/05/24 -->
<li>Made <a href="https://man.openbsd.org/ldomctl">ldomctl(8)</a> "init-system -n" check vcpu and memory constraints.
<li>Relaxed filename checks in <a href="https://man.openbsd.org/syspatch">syspatch(8)</a> to allow use of hyphens.
<!-- 2020/05/23 -->
<li>Adjusted <a href="https://man.openbsd.org/dwpcie">dwpcie(4)</a> timing to improve likelihood of a successful PCIe link on the i.MX8MM. Avoids a failure to detect <a href="https://man.openbsd.org/em">em(4)</a> on the HummingBoard Pulse.
<!-- 2020/05/22 -->
<li>Added RB_GOODRANDOM passed from bootloader to kernel in boothowto, indicating confidence a "great seed" was loaded.
<li>Added an Atheros QCA986x/988x <a href="https://man.openbsd.org/pci">pci(4)</a> ID.
<li>Enabled the FFS2 option on the luna88k ramdisk.
<li>Added support for the Marvell Xenon SDHC, used as storage on the Armada 3700 and 8040 SoCs. This should make eMMC7CD show up on the MACCHIATObin.
<li>Added support for the SD card detect pins on the Turris Mox.
<li>Added <a href="https://man.openbsd.org/mvkpcie">mkvpcie(4)</a>, a driver for the Aardvark PCIe controller found on the Armada 3700 SoC.
<li>Fixed the <a href="https://man.openbsd.org/ksh">ksh(1)</a> exit code when evaluating a || compound list to prevent termination of the shell when running under -e.
<!-- 2020/05/21 -->
<li>Added an ASMedia ASM1182e PCIe switch <a href="https://man.openbsd.org/pci">pci(4)</a> id.
<li>Fixed an uninitialized variable and potential stack overflow with IPv6 connections in <a href="https://man.openbsd.org/smtpd">smtpd(8)</a>.
<!-- 2020/05/20 -->
<li>Implemented a <a href="https://man.openbsd.org/carp">carp(4)</a> transmit bypassing the ifq on output, enqueuing the packet directly on the parent interface.
<li>Opened up a 4GB memory bus window for <a href="https://man.openbsd.org/mvneta">mvneta(4)</a> on the Marvell Armada 3700, making the second ethernet controller/port work on the Turris Mox.
<!-- 2020/05/19 -->
<li>Released <a href="https://opensmtpd.org/announces/release-6.7.0p1.txt">OpenSMTPD</a> 6.7.0p1.
<li>Moved back to FFS1 by default for MFS.
<li>Updated <a href="https://man.openbsd.org/unbound">unbound(8)</a> to 1.10.1.
<!-- 2020/05/18 -->
<li>Added support for TLS 1.3 server to send certificate status messages with oscp staples.
<li>Released <a href="https://man.openbsd.org/rpki-client">rpki-client(8)</a> 6.7p0.
<li>Offloaded CCMP (WPA2) encryption and decryption to <a href="https://man.openbsd.org/iwm">iwm(4)</a> hardware, reducing CPU load during traffic bursts.
<li>Introduced a "dark mode" for directory listings and error pages in <a href="https://man.openbsd.org/httpd">httpd(8)</a>.
<li>Made OpenBSD boot on the odroid c4 with power domain in <a href="https://man.openbsd.org/amldwusb">amldwusb(4)</a>.
<li>Added <a href="https://man.openbsd.org/amlpwrc">amlpwrc(4)</a>, a driver for the power domain controller found on Amlogic SoCs.
<li>Fixed a hang in <a href="https://man.openbsd.org/rpki-client">rpki-client(8)</a> by properly waiting for exiting <a href="https://man.openbsd.org/openrsync">openrsync(1)</a> processes.
<li>Made FFS2 the default for <a href="https://man.openbsd.org/newfs">newfs(8)</a>.
<!-- 2020/05/17 -->
<li>Changed install images called *.fs to *.img to accommodate some UEFI bootloaders.
<li>Restored VGA fonts on VT switch, preventing an unusable screen when switching to a VT with a custom VGA font from X.
<li>Added a decode error alert when a TLS server provides an empty certificate list.
<!-- 2020/05/16 -->
<li>Began initial development of an OpenBSD/powerpc64 port.
<li>In <a href="https://man.openbsd.org/tmux">tmux(1)</a>:
<ul>
<li>Added an option to set the pane border lines style as single lines, double or heavy, simple or number (the pane numbers).
<li>Added a client flag 'active-pane' which stores the active pane in the client and allows it to be changed independently from the real active pane stored in the window.
<li>Added a -D flag to run in non-daemonized mode.
<li>Added a customize mode (C) where keys and options can be browsed and changed.
<li>Added M-+ and M-- to expand and collapse all items in tree mode.
<li>Changed refresh-client -F to -f and added -f flags to attach-session and switch-client.
<li>Added -e for new-session to set environment variables.
<li>Added the 'e' key in buffer mode to open the buffer in an editor.
<li>Added -W and -T flags to command-prompt to only complete a window and a target.
</ul>
<li>Ensured that a TLSv1.3 server has provided a certificate before attempting validation.
<li>Implemented <a href="https://man.openbsd.org/kqueue">kqueue(2)</a> support for <a href="https://man.openbsd.org/video">video(4)</a>.
<li>Updated to xkbprint 1.0.5.
<li>Updated to libXxf86dga 1.1.5.
<li>Updated to libXrandr 1.5.2 and <a href="https://man.openbsd.org/xrandr">xrandr(1)</a> 1.5.1.
<li>Updated to libxcb 1.14 and xcb-proto 1.14.
<!-- 2020/05/15 -->
<li>Fixed CCMP replay checks with 11n Rx aggregation and CCMP hardware offloading.
<li>Disabled <a href="https://man.openbsd.org/ohci">ohci(4)</a> on the amd64 ramdisk kernel.
<li>Fixed <a href="https://man.openbsd.org/dhclient">dhclient(8)</a> domain-search option processing.
<!-- 2020/05/14 -->
<li>Enabled TLSv1.3 support in <a href="https://man.openbsd.org/relayd">relayd(8)</a>.
<li>Set <a href="https://man.openbsd.org/ddb">ddb(4)</a> "/t" to show a trace via TID on all architectures.
<li>Updated <a href="https://man.openbsd.org/nsd">nsd(8)</a> to 4.3.1.
<!-- 2020/05/13 -->
<li>Added -rls1_3 and -no_tls1_3 options to <a href="https://man.openbsd.org/openssl">openssl(1)</a> s_server.
<li>Preserved group/world read permission on known_hosts files across runs of <a href="https://man.openbsd.org/ssh-keygen">ssh-keygen(1)</a> "-Rf /path".
<!-- 2020/05/12 -->
<!-- 2020/05/11 -->
<li>Fixed an <a href="https://man.openbsd.org/iked">iked(8)</a> policy lookup edge case for simultaneous transport and tunnel mode SAs.
<li>Enabled the TLSv1.3 server in <a href="https://man.openbsd.org/openssl">openssl(1)</a>.
<li>Improved reporting of remaining power with batteries of different capacities in <a href="https://man.openbsd.org/acpi">acpi(4)</a>.
<li>Allowed specifying -d multiple times in <a href="https://man.openbsd.org/slowcgi">slowcgi(8)</a>.
<li>Added <a href="https://man.openbsd.org/bgpctl">bgpctl(8)</a> support for VPNv6 in the family option of the "show rib" command.
<!-- 2020/05/10 -->
<li>Fixed two out-of-bounds array accesses in ioctl code pathways in <a href="https://man.openbsd.org/wscons">wscons(4)</a>.
<li>Made "reason" parsing in <a href="https://man.openbsd.org/bgpctl">bgpctl(8)</a> more generic and introduced it to the "reload" command.
<li>Added an optional "domain name" <a href="https://man.openbsd.org/acme-client.conf">acme-client.conf(5)</a> option allowing use of multiple domain sections with the same name and creation of an rsa and an ecdsa key for the same domain name.
<!-- 2020/05/09 -->
<!-- 2020/05/08 -->
<li>Fixed a crash on landisk in <a href="https://man.openbsd.org/unwind">unwind(8)</a> due to cmsg buffer misalignment.
<li>Prevented hangs in existing processes due to an indefinite wait for flushing when closing a tty.
<!-- 2020/05/07 -->
<li>Moved to 6.7-current.
</ul>
