<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Following -current</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "copyright"     content= "This document copyright 2005-2015 by OpenBSD">
<link rel="canonical" href="http://www.openbsd.org/faq/current.html">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>

<p>

<h1><font color="#e00000">Following <i>-current</i></font></h1>
<hr>

<h3>Table of Contents</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Oldest on top... -->
<!-- New additions go on the bottom, please -->
<li><a href="#20150822">2015/08/22 - [xenocara] libdrm update</a>
<li><a href="#20150825">2015/08/25 - [ports] security/cfs removed</a>
<li><a href="#20150911">2015/09/11 - config(8) update</a>
<li><a href="#20150912">2015/09/12 - ifmedia extended to 64 bits</a>
<li><a href="#20150918">2015/09/18 - [ports] php-fpm rc script renamed</a>
<li><a href="#20151019">2015/10/19 - [xenocara] freetype update</a>
</ul>

<hr>

<!-- XXXversion -->
<h2 id="Intro">Introduction</h2>
This document is for people who wish to follow <i>-current</i>.
It contains information about changes from 5.8-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 5.7 or earlier, or people
wishing to follow <a href="../stable.html"><i>-stable</i></a>.

<p>
If you wish to upgrade to 5.8-release or 5.8-stable from previous
versions, see the <a href="upgrade58.html">upgrade guide</a> instead,
as what is here does not apply to 5.8.

<p>
Make sure you have read and understood
<a href="faq5.html">FAQ 5 - Building the System from Source</a>
before using -current and the instructions below.

<p>
You should ALWAYS use a snapshot as the starting point for running
<i>-current</i>.
Upgrading by compiling your own source code is not supported.

<p>
Most of these changes will have to be performed as root.


<h3 id="20150822">2015/08/22 - [xenocara] libdrm updated</h3>
libdrm has been updated to a new version, moving a few files around.
As a consequence, old files should be removed:
<pre>
         rm -f /usr/X11R6/include/intel_*.h
	 rm -f /usr/X11R6/include/r600_pci_ids.h
	 rm -f /usr/X11R6/include/radeon_*.h
</pre>
<h3 id="20150825">2015/08/25 - [ports] security/cfs removed</h3>
The security/cfs ports has been removed, users are encouraged to use
another data encryption method.  Possible alternatives are softraid(4)
CRYPTO, encrypted vnd(4) devices or the security/encfs port.  To remove
an existing cfs package, use:
<pre>
	pkg_delete cfs
</pre>

<h3 id="20150911">2015/09/11 - config(8) update</h3>
An up to date
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8">
config(8)</a> is needed to build kernels.
After updating the source tree, a new config(8) can be built and installed:
<pre>
	cd /usr/src/usr.sbin/config
	make obj &amp;&amp; make cleandir &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
</pre>
Afterwards, any existing kernel compilation directories must be
rebuilt after running config again.
Refer to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">
release(8)</a> for details.

<h3 id="20150912">2015/09/12 - ifmedia extended to 64 bits</h3>

The ifmedia options word has been extended to 64 bits.
This changes numbers of the SIOCSIFMEDIA and SIOCGIFMEDIA ioctls and
grows struct ifmediareq. Upgrading from snapshots is recommended.
Old ifconfig and dhclient binaries are able to configure addresses on
interfaces but are unable to display or change media settings.
When upgrading from source, ifconfig and dhclient must be recompiled
with new headers to run properly on top of a new kernel. 
This will happen automatically during a normal 'make build'.
In case neither snapshots nor 'make build' can be used, the manual steps are:
<pre>
	install -m 444 -o root -g bin /usr/src/sys/net/if.h /usr/include/net/if.h
	install -m 444 -o root -g bin /usr/src/sys/net/if_media.h /usr/include/net/if_media.h
	install -m 444 -o root -g bin /usr/src/sys/sys/sockio.h /usr/include/sys/sockio.h
	cd /usr/src/sbin/ifconfig
	make obj
	make depend
	make
	make install
	cd /usr/src/sbin/dhclient
	make obj
	make depend
	make
	make install
</pre>

Some additional libraries and applications must also be recompiled.
Run a full 'make build' to ensure everything is in order.

<h3 id="20150918">2015/09/18 - [ports] php-fpm rc script renamed</h3>

To allow installing multiple versions of php-fpm on the same system,
the rc script has been renamed to include the version number.
If you are using this, modify references to php_fpm in /etc/rc.conf.local
to e.g. php56_fpm.

<h3 id="20151019">2015/10/19 - [xenocara] freetype update</h3>

Freetype was updated to version 2.6.1, which causes header files to be moved
around. As a result, some old files needs to be removed manually:
<pre>
	cd /usr/X11R6/include/freetype2
	rm -rf config
	rm -f freetype.h ftadvanc.h ftbbox.h ftbdf.h ftbitmap.h ftbzip2.h \
            ftcache.h ftcffdrv.h ftchapters.h ftcid.h fterrdef.h \
            fterrors.h ftfntfmt.h ftgasp.h ftglyph.h ftgxval.h ftgzip.h \
            ftimage.h ftincrem.h ftlcdfil.h ftlist.h ftlzw.h ftmac.h \
            ftmm.h ftmodapi.h ftmoderr.h ftotval.h ftoutln.h ftpfr.h \
            ftrender.h ftsizes.h ftsnames.h ftstroke.h ftsynth.h \
            ftsystem.h fttrigon.h fttypes.h ftwinfnt.h t1tables.h \
            ttnameid.h tttables.h tttags.h ttunpat.h
</pre>

<p>
<hr>
<small>$OpenBSD: current.html,v 1.627 2015/10/19 20:05:20 matthieu Exp $</small>

</body>
</html>
