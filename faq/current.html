<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Following -current and using snapshots</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "copyright"     content= "This document copyright 2005-2016
                                      by OpenBSD">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../openbsd.css">
<link rel="canonical" href="http://www.openbsd.org/faq/current.html">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<h2>
<a href="../index.html">
<font color="#0000ff"><i>Open</i></font><font color="#000084">BSD</font></a>
<font color="#e00000">Following <i>-current</i> and using snapshots</font>
<small>
<a href="index.html" style="font-weight:normal; float:right">[FAQ Index]</a>
</small>
</h2>
<hr>
<p>

Active OpenBSD development is known as the
<a href="faq5.html#Flavors">-current</a> branch.
These sources are frequently compiled into releases known as <i>snapshots</i>.
Active development sometimes pushes aggressive changes, and complications can
arise when building the latest code from a previous point in time.
Some of the shortcuts for getting over these hurdles are explained on this page.
In general, it's far better to use the
<!-- XXXrelease -->
<a href="upgrade60.html">OpenBSD upgrade procedure</a>
with a newer snapshot, as developers will have gone through the trouble for
you already.

<p>
Make sure you've read and understand how to
<a href="faq5.html">build the system from source</a>
before using -current and the instructions below.

<p>
You should <b>always</b> use a snapshot as the starting point for running
<i>-current</i>.
Upgrading by compiling your own source code is not supported.

<p>
Most of these changes will have to be performed as root.

<h3 id="r20160801">2016/08/01 - new mandoc.db(5) format</h3>

To update all <a href="http://man.openbsd.org/mandoc.db.5">mandoc.db(5)</a>
files to the new format, run:

<blockquote><pre>
makewhatis
</pre></blockquote>

<h3 id="r20160808">2016/08/08 - Mandatory W^X enforcement</h3>

W^X violations are now only permitted for binaries marked <b>wxneeded</b>
executed from filesystems marked <b>wxallowed</b>.
<ul>
<li>The base system is clean.
<li>Starting in 6.0, the installer sets the <tt>/usr/local</tt>
    filesystem to <b>wxallowed</b> -- if your filesystem is not
    set so, make this change.
<li>The ports tree contains a number of binaries which are not
    yet marked <b>wxneeded</b> but work is underway to mark them all.
</ul>

<h3 id="r20160810">2016/08/10 - RELRO by default on all archs but luna88k</h3>

The system now uses the RELRO design ("read-only after relocation") to
lay out executables and libraries such that they use fewer mappings and
more of the initial data can be protected as read-only.
Unlike other OSes, this applies to <b>all</b> dynamic executables and libraries
by default, as well as to static PIE executables.
<p>
To upgrade over this, start from a system running 6.0-release or later and an
up-to-date source tree:
<blockquote><pre>
cd /usr/src &amp;&amp; make obj &amp;&amp; make clean &amp;&amp; make includes
cd /usr/src/libexec/ld.so
make SUBDIR= depend &amp;&amp; make SUBDIR= &amp;&amp; doas make SUBDIR= install
cd /usr/src/lib/csu
make depend &amp;&amp; make &amp;&amp; doas make install
cd /usr/src/gnu/usr.bin/binutils-2.17
make -f Makefile.bsd-wrapper &amp;&amp; doas make -f Makefile.bsd-wrapper install
cd /usr/src &amp;&amp; make build
</pre></blockquote>

<h3 id="r20160812">2016/08/12 - [packages] py-elasticsearch-curator update</h3>

With the update of Elasticsearch Curator to the 4.x version, the CLI interface
changed.
Instead of parameters, yaml configuration files are used to steer actions of
curator.
Configuration file documentation can be found on the
<a href="https://www.elastic.co/guide/en/elasticsearch/client/curator/4.0/index.html">
curator reference pages</a>.


<hr>
<small>$OpenBSD: current.html,v 1.706 2016/08/12 08:15:05 tb Exp $</small>

</body>
</html>
