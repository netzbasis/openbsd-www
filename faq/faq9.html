<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>

<!-- If you make edits to any FAQ documents, please start each sentence
     on a new line, and try to keep the general formatting consistent
     with the rest of the pages -->

<title>9 - Migrating to OpenBSD</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "description"   content= "OpenBSD FAQ 9 - Migrating to OpenBSD">
<meta name= "copyright"     content= "This document copyright 1998-2016
                                      by OpenBSD.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../openbsd.css">
<link rel="canonical" href="http://www.openbsd.org/faq/faq9.html">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<h2>
<a href="../index.html">
<font color="#0000ff"><i>Open</i></font><font color="#000084">BSD</font></a>
<font color="#e00000">FAQ 9 - Migrating to OpenBSD</font>
</h2>
<hr>
<p>
<a href= "index.html">[FAQ Index]</a>
<a href= "faq8.html">[To Section 8 - General Questions]</a>
<a href= "faq10.html">[To Section 10 - System Management]</a>
<p>

<h3>Table of Contents</h3>
<ul>
<li><a href= "#Introduction" >9.1 - Tips for users of other Unix-like
                              operating systems</a>
<li><a href= "#DualBoot"     >9.2 - Dual booting Linux and OpenBSD</a>
<li><a href= "#passwd"       >9.3 - Converting your Linux (or other Sixth
                              Edition-style) password file to BSD-style</a>
<li><a href= "#Ext2FS"       >9.4 - Accessing your Linux files from OpenBSD</a>
</ul>

<hr>

<a name= "Linux"></a><h2 id="Introduction">9.1 - Tips for users of other
Unix-like operating systems</h2>

While OpenBSD is a very traditional Unix-like operating system and will
be very familiar to those who have used other Unix-like systems, there are
important differences.
New users to OpenBSD must look at their own experience:
if your only knowledge of Unix is some experience with one variant of Linux,
you may find OpenBSD "strange."
Rest assured, Linux looks pretty strange to anyone who starts from OpenBSD.
You must recognize the difference between "standard" and your experience.

<p>
If you learned Unix from any of the <a href="../books.html">good books</a>
on general Unix, understanding the "Unix philosophy" and then extending
your knowledge to a particular platform, you will find OpenBSD to be a
very "true" and familiar Unix.
If you learned Unix using a "type this to do that" process or a book
such as "Learn PinkBeenie v8.3 in 31.4 Hours" and told yourself you
"know" Unix, you will most likely find OpenBSD very different.

<p>
One important difference between OpenBSD and many other operating systems
is the documentation.
OpenBSD developers take great pride in the system
<a href="http://man.openbsd.org">man pages</a>.
The man pages are <i>the</i> authoritative source of OpenBSD documentation
-- not this FAQ, not third-party independently maintained pages, not "howto"
guides, etc.
When a developer makes a change to the system, they are expected to
update the man pages along with their change to the system code, not
"later" or "when they get around to it" or "when someone complains."
A manual page exists for virtually every program, utility, driver,
configuration file, and so on on the stock system.
It is expected that a user will check the man pages before asking for
help on the <a href="../mail.html">mailing lists</a>.

<p>
Here are some of the commonly encountered differences between OpenBSD
and other Unix variants.

<ul>
<li>OpenBSD is a fairly pure "BSD-Style" Unix, following the 4.4BSD
design closely.
Linux and Solaris are "System V" style systems.
Some Unix-like operating systems (including some Linux distributions)
mix many SysV and BSD characteristics.
A common place where this causes confusion is the <a href="faq10.html#rc">
startup scripts</a>.
OpenBSD uses the traditional BSD4.4-style
<a href="http://man.openbsd.org/?query=rc">rc(8)</a> system.

<li>OpenBSD is a complete <i>system</i>, intended to be kept in sync.
It is not a "kernel plus utilities" that can be upgraded separately
from each other.
Failure to keep your system (kernel, user utilities, and applications)
in sync will result in bad things happening.

<li>As many applications are not developed to directly compile and run
on an OpenBSD environment, OpenBSD has a <a href="faq15.html#Ports">
ports tree</a> -- a system where users can easily acquire code, patch it
for OpenBSD, install dependencies, compile it, install and remove it in
a standardized and maintainable way.
Pre-compiled <a href="faq15.html#PkgMgmt">packages</a> are created and
distributed by the OpenBSD ports team.
Users are <a href="faq15.html#PkgVsPorts">encouraged</a> to use these
packages over compiling their own.

<li>OpenBSD uses CVS to keep track of source code changes.
OpenBSD pioneered <a href="../anoncvs.html">anonymous CVS</a>, which
allows anyone to extract the full source tree for any version of OpenBSD
(from 2.0 to current, and all revisions of all files in between) at any
time, and you can access the most recent changes within hours of its commit.
There is also a very convenient and easy to use web interface to CVS at
<a href="http://cvsweb.openbsd.org">cvsweb.openbsd.org</a>.

<li>OpenBSD produces an official release available via
<a href="../orders.html">CD</a> and <a href="../ftp.html">HTTP</a> every
six months on a <a href="faq1.html#Next">predefined schedule</a>.
Snapshots for all supported platforms are made semi-regularly with the
current development code.
It is the goal that the source tree is kept fully buildable and the
resultant system usable at all times.
The tree is occasionally broken, but this is an extraordinary event that
will be corrected rapidly, not something that will be permitted to
continue.

<li>OpenBSD has gone through heavy and continual security auditing to
ensure the quality (and thus, security) of the code.

<li>OpenBSD's kernel is <tt>/bsd</tt>.

<li>The names of hard disks are usually <tt>/dev/wd</tt> (SATA/IDE) and
<tt>/dev/sd</tt> (SCSI or devices emulating SCSI disks, such as USB drives).

<li><a href="http://man.openbsd.org/?query=route">route(8)</a>
with no arguments in Linux gives the state of all the active routes.
Under OpenBSD (and many other OSs), you need the "<i>show</i>" parameter,
or you can use <a href="http://man.openbsd.org/?query=netstat">netstat(1)</a>'s
<tt>-r</tt> flag.

<li>OpenBSD does NOT support Journaling Filesystems like ReiserFS, IBM's
JFS or SGI's XFS.
Instead we use the <a href="faq14.html#SoftUpdates">soft updates</a> feature
of the already very robust Unix Fast File System (FFS) to accomplish the
goals of performance and stability.

<li>OpenBSD comes with <a href="pf/index.html">Packet Filter (PF)</a>,
not ipfw, ipchains, netfilter, iptables, or ipf.
This means that Network Address Translation (known as IP-Masquerading in
Linux), queuing, and filtering are handled through
<a href="http://man.openbsd.org/?query=pfctl">pfctl(8)</a>,
<a href="http://man.openbsd.org/?query=pf">pf(4)</a> and
<a href="http://man.openbsd.org/?query=pf.conf">pf.conf(5)</a>.
See the <a href="pf/index.html">PF User's Guide</a> for detailed configuration
information.

<li>The interface's address is stored in a
<a href="http://man.openbsd.org/?query=hostname.if">hostname.if(5)</a>
file (for example, <tt>/etc/hostname.em0</tt> for a NIC using the
<a href="http://man.openbsd.org/?query=em">em(4)</a> driver).
It can contain a hostname (resolved in the
<a href="http://man.openbsd.org/?query=hosts">hosts(5)</a>
file) instead of an IP address.

<li>The machine name is in <tt>/etc/myname</tt> - see
<a href="http://man.openbsd.org/?query=myname">myname(5)</a>.

<li>The default gateway is in <tt>/etc/mygate</tt> - see
<a href="http://man.openbsd.org/?query=mygate">mygate(5)</a>.

<li>OpenBSD's default shell is
<a href="http://man.openbsd.org/?query=ksh">ksh(1)</a>,
which is <a href="http://web.cs.mun.ca/~michael/pdksh/">pdksh</a>, the
Public Domain Korn shell.
Other included shells are
<a href="http://man.openbsd.org/?query=csh">csh(1)</a>
and <a href="http://man.openbsd.org/?query=sh">sh(1)</a>.
Shells such as <i>bash</i> and many others can be added from
<a href="faq15.html#PkgMgmt">packages</a> or <a href="faq15.html#Ports">
ports</a>.
Users familiar with bash are encouraged to try ksh before loading bash
on their system -- it does what most people desire of a shell.

<li>Password management on OpenBSD is different from password management
on some other Unix-like operating systems.
The actual passwords are stored in the
<a href="http://man.openbsd.org/?query=master.passwd">master.passwd(5)</a>
file, which is only readable by root.
This file should be altered only with the
<a href="http://man.openbsd.org/?query=vipw">vipw(8)</a>
program.

<li>Devices are named by driver, not by type.
In other words, there are no <tt>eth0</tt> and <tt>eth1</tt> devices.
It would be <tt>em0</tt> for an Intel PRO/1000 Ethernet card, <tt>bge0</tt>
for a Broadcom BCM57xx or BCM590x Ethernet device, <tt>ral0</tt> for a RaLink
wireless device, etc.
All of these drivers have man pages in section 4.
As an example, to find more information about the features supported by the
PRO/1000 driver, you can do <tt>man 4 em</tt>.

<li>OpenBSD/i386, amd64, and several other platforms use a "two layer"
disk partitioning system, where the first layer is the
<a href="faq14.html#fdisk">fdisk</a> BIOS-visible partition, familiar
to most users of IBM compatible computers.
The second layer is the <a href="faq14.html#disklabel">disklabel</a>,
a traditional BSD partitioning system.
OpenBSD supports up to 15 disklabel partitions on a disk, all residing
within one fdisk partition.
This lets OpenBSD to coexist with other OSs, including other Unix-like ones.
OpenBSD must be installed to one of the four "primary" partitions.

<li>Some other OSs encourage you to customize your kernel for your machine.
OpenBSD users are encouraged to simply use the standard GENERIC kernel
provided and tested by the developers.
Users attempting to "customize" or "optimize" their kernel usually
cause far more problems than they solve, and will not be supported
by developers.

<li>OpenBSD works hard to maintain the <a href="../policy.html">license
policy</a> and <a href="../security.html">security</a> of the project.
For this reason, some newer versions of some software which fail to meet
either the license or security goals of the project have not (and may
never be) integrated into OpenBSD.
Security and free licensing will never take a back seat to having the
biggest version number.

</ul>

<h2 id="DualBoot">9.2 - Dual booting Linux and OpenBSD (amd64/i386)</h2>

Multibooting is not trivial, and it requires an understanding of ALL the
operating systems you wish to have coexist on the machine.
The GRUB loader commonly used with Linux can boot OpenBSD as a generic
operating system.
From time to time, GRUB tries to natively handle OpenBSD booting --
using this feature is NOT recommended, as there is no coordination with
OpenBSD development.
As such, this feature is often broken, and there's really no need for it.
Just use OpenBSD's boot code, and what GRUB terms "chain loading" to
invoke it.

<p>
A GRUB entry which could boot OpenBSD installed on the second MBR
partition (partition "1" in OpenBSD's fdisk) might look like:

<blockquote><pre>
menuentry "OpenBSD" {
	set root=(hd0,2)
	chainloader +1
}
</pre></blockquote>

Your milage will vary.

<h2 id="passwd">9.3 - Converting your Linux (or other Sixth Edition-style)
password file to BSD-style</h2>

First, figure out if your Linux password file is shadowed or not.
If it is, install <a href="http://www.openwall.com/john/">John the Ripper</a>
from <a href="faq15.html">packages or ports</a> (<tt>security/john</tt>) and
use the "unshadow" utility that comes with it to merge your <tt>passwd</tt>
and <tt>shadow</tt> files into one Sixth Edition-style file.

<p>
Using your Linux password file, we'll call it <tt>linux_passwd</tt>, you
need to add in ::0:0 between fields four and seven.
<a href="http://man.openbsd.org/?query=awk">awk(1)</a>
does this for you.

<blockquote><pre>
# <b>awk -F : '{printf("%s:%s:%s:%s::0:0:%s:%s:%s\n", \</b>
> <b>$1,$2,$3,$4,$5,$6,$7); }' linux_passwd > new_passwd</b>
</pre></blockquote>

At this point, you want to edit the <tt>new_passwd</tt> file and remove
the root and other system entries that are already present in your
OpenBSD password file or aren't applicable with OpenBSD (all of them).
Also, make sure there are no duplicate usernames or user IDs between
<tt>new_passwd</tt> and your OpenBSD box's <tt>/etc/passwd</tt>.
The easiest way to do this is to start with a fresh <tt>/etc/passwd</tt>.

<blockquote><pre>
# <b>cat new_passwd >> /etc/master.passwd</b>
# <b>pwd_mkdb -p /etc/master.passwd</b>
</pre></blockquote>

The last step, <tt>pwd_mkdb</tt> is necessary to rebuild the
<tt>/etc/spwd.db</tt> and <tt>/etc/pwd.db</tt> files.
It also creates a Sixth Edition-style password file (minus encrypted passwords)
at <tt>/etc/passwd</tt> for programs which use it.
OpenBSD uses a stronger encryption for passwords, blowfish, which is very
unlikely to be found on any system which uses full Sixth Edition-style
password files.
To switch over to this stronger encryption, simply have the users run
<tt>passwd</tt> and change their password.
The new password they enter will be encrypted with your default setting
(usually blowfish unless you've edited <tt>/etc/login.conf</tt>).
Or, as root, you can run <tt>passwd <i>username</i></tt>.

<h2 id="Ext2FS">9.4 - Accessing your Linux files from OpenBSD</h2>

OpenBSD supports the EXT2 file system for read/write, and can read EXT4.
For further information, see <a href="faq14.html#foreignfs">FAQ 14</a>.

<p>
<hr>
<p>
<a href= "index.html">[FAQ Index]</a>
<a href= "faq8.html">[To Section 8 - General Questions]</a>
<a href= "faq10.html">[To Section 10 - System Management]</a>
</body>
</html>
