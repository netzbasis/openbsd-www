<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>2 - Getting to know OpenBSD</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="copyright"     content="This document copyright 1998-2015 by OpenBSD.">
<link rel="canonical" href="http://www.openbsd.org/faq/faq2.html">
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">    
</a>
<p>
<a href="index.html">[FAQ Index]</a>
<a href="faq1.html">[To Section 1 - Introduction to OpenBSD]</a>
<a href="faq3.html">[To Section 3 - Getting started with OpenBSD]</a>

<h1><font color="#e00000">2 - Getting to know OpenBSD</font></h1>
<hr>

<p>
<h3>Table of Contents</h3>
<ul>
<li><a href="#WebSites">2.1 - Web Pages</a>
<li><a href="#MailLists">2.2 - Mailing Lists</a>
<li><a href="#ManPages">2.3 - Manual Pages</a>
<li><a href="#Bugs">2.4 - Reporting Bugs</a>
</ul>

<hr>

<h2 id="WebSites">2.1 - Web Pages of Interest</h2>

<p>
The official website for the OpenBSD project is located at
<a href="http://www.openbsd.org">http://www.OpenBSD.org</a>.

<p>
A lot of valuable information can be found here regarding all aspects of
the OpenBSD project. 

<p>
The <a href="http://www.undeadly.org">OpenBSD Journal</a> is an
OpenBSD-focused news and opinion site.  

<p>
Many users have set up sites and pages with OpenBSD specific
information.
As with everything on the Internet, a good search engine is going to
make your life easier, as will a healthy dose of skepticism.
As always, do not blindly enter commands you do not understand into
your computer.

<h2 id="MailLists">2.2 - Mailing Lists</h2>

<p>
The OpenBSD project maintains several popular mailing lists which users
should subscribe to and follow. To subscribe to a mailing list, send an
email to
<a href="mailto:majordomo@openbsd.org">majordomo@openbsd.org</a>. That
address is an automated subscription service. In the body of your
message, on a single line, you should include a subscribe command for
the list you wish to join. For example:

<blockquote><pre>
<strong>subscribe announce</strong>
</pre></blockquote>

<p>
The list processor will reply to you, asking for confirmation of your
intent to join the list, so that others can not subscribe you to a flood
of unwanted email.  The message will include instructions for several
different ways to confirm, including a
<a href="https://lists.openbsd.org">list server</a> web page link,
responding to the confirmation message or responding to
<tt>majordomo@openbsd.org</tt>.  Use whatever method is convenient to
you.  You will note that all three techniques involve a unique and time
limited identifying number, such as <tt>A56D-70D4-52C3</tt>, again to
make sure <i>you</i> are really the person who requested this mail list
subscription (this is <i>real</i> "opt-in").

<p>
Once you have confirmed your intent to join, you will be immediately
added to the list, and the list processor will notify you that you were
successfully added.

<p>
To unsubscribe from a list, you will again send an email to
<a href="mailto:majordomo@openbsd.org">majordomo@openbsd.org</a>.
It might look like this:

<blockquote><pre>
<strong>unsubscribe announce</strong>
</pre></blockquote>

<p>
If you have any difficulties with the mailing list system, please first
read the help file which can be obtained by sending an email
to <a href="mailto:majordomo@openbsd.org">majordomo@openbsd.org</a> with
a message body of "help".

<p>
Your subscription to the OpenBSD lists can also be maintained through
the web interface at
    <a href="https://lists.openbsd.org">lists.openbsd.org</a>.

<p>
Some of the more popular OpenBSD mailing lists are:

<p>
<ul>
    <li><b>announce</b> - Project announcements and errata notices. This is
    a low-volume list.
    <li><b>misc</b> - General user questions and answers.
    This is the most active list, and should be the "default" for most
    questions and discussion.
    <li><b>bugs</b> - Bugs received via <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1">sendbug(1)</a> and
    discussion about them.
    <li><b>source-changes</b> - Automated mailing of CVS source tree changes.
    Every time a developer commits a change to the OpenBSD source, xenocara
    or www tree, CVS will send out a copy of the (usually brief) commit message
    via this list.
    <li><b>ports</b> - Discussion of the OpenBSD ports tree.
    <li><b>ports-changes</b> - Automated mailing of
    ports-specific CVS source tree changes.
    <li><b>advocacy</b> - Discussion on advocating OpenBSD
    and topics that are just too off-topic for <b>misc</b>.
</ul> 

<p>
Before posting a question on <b>misc</b> or any other mailing list, please
check the archives for most common questions have been asked repeatedly.
While it might be the first time you have encountered the problem or question,
others on the mailing lists may have seen the same question several times
in the last week, and may not appreciate seeing it again. 
If asking a question possibly related to hardware, <i>always</i> include a 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">
dmesg(8)</a>!

<p>
You can find several archives, other mailing list guidelines and more
information on the <a href="../mail.html">mailing lists page</a>.

<p>
An unofficial mailing list that may be of interest to new users
of OpenBSD and Unix is the  
<a href="http://mailman.theapt.org/listinfo/openbsd-newbies">OpenBSD
Newbies</a> list. 

<h2 id="ManPages">2.3 - Manual Pages</h2>

<p>
OpenBSD comes with extensive documentation in the form of manual pages.
Considerable effort is made to make sure the man pages are up-to-date
and accurate.
In all cases, the man pages are considered the authoritative source of
information for OpenBSD.

<p>
To access the manual pages, be sure that you
installed the correct <a href="faq4.html#FilesNeeded">file set</a>.

<p>
Here is a list of some of the most useful manual pages for new users:

<p>

<b>Getting Started</b>
<ul>
<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8"
  >afterboot(8)</a></b> - things to check after the first complete boot.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=help&amp;sektion=1"
  >help(1)</a></b> - help for new users and administrators.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hier&amp;sektion=7"
  >hier(7)</a></b> - layout of filesystems.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=man&amp;sektion=1"
  >man(1)</a></b> - display the on-line manual pages.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=1"
>intro(1)</a></b> - introduction to general commands, also see the intros to the other
  sections of the manual:
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=2">intro(2)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=3">intro(3)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=4&amp;arch=i386">intro(4)</a>
(note: intro(4) is <a href="../plat.html">platform</a>-specific),
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=5">intro(5)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=6">intro(6)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=7">intro(7)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=8">intro(8)</a>,
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=intro&amp;sektion=9">intro(9)</a>.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8"
  >adduser(8)</a></b> - command for adding new users.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8"
  >vipw(8)</a></b> - edit the master password file.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8"
  >disklabel(8)</a></b> - read and write disk pack label.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=reboot&amp;sektion=8"
  >reboot, halt(8)</a></b> - stop and restart the system.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=shutdown&amp;sektion=8"
  >shutdown(8)</a></b> - close down the system at a given time.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8"
  >dmesg(8)</a></b> - redisplay the kernel boot messages.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=doas&amp;sektion=1"
  >doas(1)</a></b> - don't log in as root, but run commands as root.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&amp;sektion=1"
		>mg(1)</a></b> - emacs-like text editor.

</ul>

<b>For more advanced users</b>
<ul>
<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386"
  >boot(8)</a></b> - system bootstrapping procedures.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&amp;sektion=8"
  >boot_config(8)</a></b> - how to change kernel configuration at boot.
  
<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc-local&amp;sektion=1"
  >gcc-local(1)</a></b> - OpenBSD-specific modifications to
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a>.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8"
  >ifconfig(8)</a></b> - configure network interface parameters.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&amp;sektion=5"
  >login.conf(5)</a></b> - format of the login class configuration file.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=netstat&amp;sektion1"
  >netstat(1)</a></b> - show network status.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8"
 >release(8)</a></b> - build an OpenBSD release.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1"
  >sendbug(1)</a></b> - send a problem report (PR) about OpenBSD to a central support site.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=style&amp;sektion=9"
  >style(9)</a></b> - OpenBSD kernel source code style guide.

<li><b><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8"
  >sysctl(8)</a></b> - get or set kernel state.

</ul>

<p>
You can find all the OpenBSD man pages on the web at 
<a href="http://www.openbsd.org/cgi-bin/man.cgi">http://www.openbsd.org/cgi-bin/man.cgi</a>
as well as on your computer if you install the <tt>manXX.tgz</tt> file
set.

<p>
In general, if you know the name of a command or a manual page, you can
read it by executing <kbd>"man command"</kbd>. For example: <kbd>"man
vi"</kbd> to read about the vi editor. If you don't know the name of the
command, or if <kbd>"man command"</kbd> doesn't find the manual page,
you can search the manual page database by executing <kbd>"apropos
something"</kbd> or <kbd>"man -k something"</kbd>, where "something" is a
likely word that might appear in the title of the manual page you're
looking for. For example:

<blockquote><pre>
$ <b>apropos "time zone"</b>
tzfile (5) - time zone information
zdump (8) - time zone dumper
zic (8) - time zone compiler
</pre></blockquote>

<p>
The parenthetical numbers indicate the section of the manual in which
that page can be found. In some cases, you may find manual pages with
identical names living in separate sections of the manual. For example,
assume that you want to know the format of the configuration files for
the cron daemon. Once you know the section of the manual for the page
you want, you would execute <kbd>"man n command"</kbd>, where n is the
manual section number. 

<blockquote><pre>
$ <b>man -k cron</b>
cron (8) - clock daemon
crontab (1) - maintain crontab files for individual users
crontab (5) - tables for driving cron
$ <b>man 5 crontab</b>
</pre></blockquote>

<p>
For many, having a hardcopy of the man page can be useful. Here are the
guidelines to making a printable copy of a man page.

<h3>How do I display a man page source file (i.e. one whose filename
ends in a number, like tcpdump.8)?</h3>

<p>
These are found throughout the src tree. The man pages are found in the
tree unformatted, and many times, through the use of
<a href="../anoncvs.html">CVS</a>, they will be updated. To view these
pages, simply:

<blockquote><pre>
$ <b>mandoc &lt;file&gt; | more</b>
</pre></blockquote>


<h3>How do I get a plain man page with no formatting or control
characters?</h3>

<p>
This is helpful to get the man page straight, with no non-printable
characters.

<blockquote><pre>
$ <b>man &lt;command&gt; | col -b</b>
</pre></blockquote>

<h3>How can I get a PostScript copy of a man page that's
print-ready?</h3>

<p>
Note that <tt>&lt;file&gt;</tt> must be the man page source file (probably a
file that ends in a number e.g. <tt>tcpdump.8</tt>). The PostScript versions of
the man pages look very nice. They can be printed or viewed on-screen
with a program like gv (GhostView). GhostView can be found in our
<a href="faq15.html">packages collection</a>. Use the following
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandoc&amp;sektion=1">mandoc(1)</a>
command options for getting a PostScript version from an OpenBSD system
man page:

<blockquote><pre>
$ <b>mandoc -Tps &lt;file&gt; &gt; outfile.ps</b>
</pre></blockquote>

<h3>What are info files?</h3>

<p>
Some of the documentation for OpenBSD comes in the form of info files,
typically contained in <tt>/usr/share/info</tt>. This is an alternative form
of documentation provided by GNU. Many of these files are more up to date
than the manual pages provided by GNU, and can be accessed with the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=info&amp;sektion=1">info(1)</a> command. For example, to view information about the GNU compiler,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&amp;sektion=1">gcc(1)</a>,
type:

<blockquote><pre>
$ <b>info gcc</b>
</pre></blockquote>

After using info, you will really appreciate our man pages!

<h3>How do I get color man pages on XTerm?</h3>

<p>
The default configuration file for
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&amp;sektion=1">xterm(1)</a> does not display color man pages.
In order to get color output, copy the file 
<tt>/usr/X11R6/share/X11/app-defaults/XTerm-color</tt>
to your home directory, and rename it "<tt>.Xdefaults</tt>".
Be careful not to overwrite any current settings in "<tt>.Xdefaults</tt>".
This file contains all the settings you need to enable color in XTerm.
However, three lines need to be uncommented before this can work:

<blockquote><pre>
!*VT100*colorULMode: on
!*VT100*underLine: off
!*VT100*colorBDMode: on
</pre></blockquote>

The rest of this file allows you to choose colors for various settings.
The relevant ones to the man pages are:

<blockquote><pre>
*VT100*colorUL: yellow
*VT100*colorBD: white
</pre></blockquote>

That produces rather hellish looking man pages, so customize as necessary:
may we suggest red for "colorUL" and magenta for "colorBD"?

There is also a man page viewer for X11 available,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xman&amp;sektion=1">xman(1)</a>,
which provides an alternative (graphical) interface to the manual pages.
See the manual pages for xterm and xman for more information.

<h3>How do I write my own manual page?</h3>

<p>
If you wish to write your own man page for an application you have written,
there is a handy reference guide provided in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mdoc&amp;sektion=7">mdoc(7)</a>.

<h2 id="Bugs">2.4 - Reporting Bugs</h2>

Before crying "Bug!", please make sure that is really what you are
dealing with.
If, instead, you are not understanding how something is done in OpenBSD
or how it works, and can't find out how to resolve the problem using
the <a href="#ManPages">manual pages</a> or the OpenBSD website, 
use the <a href="#MailLists">mailing lists</a> (usually misc@openbsd.org) to
request help.
If this is your first OpenBSD experience, be realistic: you probably did
not discover an unknown bug.
Also note that faulty hardware can mimic a software bug, please verify
the current condition of your hardware before deciding you have found
a "bug."

<p>
Finally, before submitting any bug report, please read 
<a href="../report.html">http://www.openbsd.org/report.html</a>.

<p>
Proper bug reporting is one of the most important responsibilities of
end users.  Very detailed information is required to diagnose most
serious bugs. Developers frequently get bugs reports via email such as
this:
<p>
<blockquote><pre>
From: joeuser@example.com
To: bugs@openbsd.org
Subject: HELP!!!

I have a PC and it won't boot!!!!! It's a 486!!!!!
</pre></blockquote>

<p>
Hopefully most people understand why such reports get summarily deleted.
All bug reports should contain detailed information. If Joe User had
really expected someone to help find this bug, he or she would have
supplied more information...  something like this:

<p>
<blockquote><pre>
From: smartuser@example.com
To: bugs@openbsd.org
Subject: 3.3-beta panics on a SPARCStation2 

OpenBSD 3.2 installed from an official CD-ROM installed and ran fine
on this machine.

After doing a clean install of 3.3-beta from a mirror, I find the
system randomly panics after a period of use, and predictably and
quickly when starting X.

This is the dmesg output:
 
[...]

This is the panic I got when attempting to start X:

panic: pool_get(mclpl): free list modified: magic=78746572; page 0xfaa93000;
 item addr 0xfaa93000
Stopped at      Debugger+0x4:   jmpl            [%o7 + 0x8], %g0
http://www.openbsd.org/ddb.html describes the minimum info required in bug
reports. Insufficient info makes it difficult to find and fix bugs.
ddb> trace
[...]

Thank you!
</pre></blockquote>

<p>
See <a href="../report.html">report.html</a> for more information on
creating and submitting bug reports. Detailed information about your
hardware is necessary if you think the bug <i>could be in any way</i>
related to your hardware or hardware configuration. Usually,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>
output is sufficient in this respect.  A detailed description of your
problem is necessary.  You will note that the dmesg described the
hardware, the text explained why Smart User thought the system was not
broken (ran 3.2 properly), how this crash was caused (starting X), and
the output of the debugger's "<tt>ps</tt>" and "<tt>trace</tt>"
commands.  In this case, Smart User provided output captured on a <a
href="faq7.html#SerCon">serial console</a>. If you can not do that, you
will have to use paper and pencil to record the crash. (This was a real
problem, and the information in the above report helped lead to a repair
of this issue which impacted Sun4c systems.)

<p>
If Smart User had a working OpenBSD system, he would have used the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1">sendbug(1)</a>
utility to submit his bug report.
Obviously you can't use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1">sendbug(1)</a>
when your system won't boot, but you should use it whenever possible.
You will still need to include detailed information about what happened,
the exact configuration of your system, and how to reproduce the
problem. The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sendbug&amp;sektion=1">sendbug(1)</a>
command requires that your system be able to send electronic mail
successfully on the Internet. 
Note that the mail server uses
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>
based greylisting, so it may take half an hour or so before the mail 
server accepts your bug report. Please be patient.

<p>
After submitting a bug report via sendbug(1),
you may be contacted by developers for additional
information or with patches that need testing.  You can also monitor the
archives of the <tt>bugs@openbsd.org</tt> mailing list - details on the
<a href="../mail.html">mailing list page</a>.

<h3>How do I get more useful info for developers?</h3>
Here are a few additional tips:

<p>
<b>Lost the "panic" message?</b>
<p>
Under some circumstances, you may lose the very first message of a
panic, stating the reason for the panic.
This is a very important message, so you want to report it as well.
You can get this back by using the "show panic" command in <tt>ddb></tt>
like this: 
<p>
<blockquote><pre>
ddb> <b>show panic</b>
0:      kernel: page fault trap, code=0
ddb> 
</pre></blockquote>
<p>
In this case, the panic string was "Kernel: page fault trap, code=0".

<p>
<b>Note for SMP systems</b>
<p>
You should get a "trace" from each processor as part of your
report:

<p>
<blockquote><pre>
ddb{0}> <b>trace</b>   
pool_get(d05e7c20,0,dab19ef8,d0169414,80) at pool_get+0x226
fxp_add_rfabuf(d0a62000,d3c12b00,dab19f10,dab19f10) at fxp_add_rfabuf+0xa5
fxp_intr(d0a62000) at fxp_intr+0x1e7
Xintr_ioapic0() at Xintr_ioapic0+0x6d
--- interrupt ---
idle_loop+0x21:
ddb{0}> <b>machine ddbcpu 1</b>
Stopped at      Debugger+0x4:   leave
ddb{1}> <b>trace</b>
Debugger(d0319e28,d05ff5a0,dab1bee8,d031cc6e,d0a61800) at Debugger+0x4
i386_ipi_db(d0a61800,d05ff5a0,dab1bef8,d01eb997) at i386_ipi_db+0xb
i386_ipi_handler(b0,d05f0058,dab10010,d01d0010,dab10010) at i386_ipi_handler+0x
4a
Xintripi() at Xintripi+0x47
--- interrupt ---
i386_softintlock(0,58,dab10010,dab10010,d01e0010) at i386_softintlock+0x37
Xintrltimer() at Xintrltimer+0x47
--- interrupt ---
idle_loop+0x21:
ddb{1}> 
</pre></blockquote>

<p>
Repeat the "<tt>machine ddbcpu x</tt>" followed by "<tt>trace</tt>"
for each processor in your machine.
<p>

<h3>How do I gather further information from a kernel crash?</h3><p>
A typical kernel crash on OpenBSD might look like this:
(things to watch for are marked with bold font)
<p>

<blockquote><pre>
kernel: page fault trap, code=0
Stopped at    <b>_pf_route+0x263</b>:        mov     0x40(%edi),%edx
ddb&gt;
</pre></blockquote>

The first command to run from the <tt>ddb></tt> prompt is "trace"
(see <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb">ddb(4)</a>
for details):
<p>

<blockquote><pre>
ddb&gt; <b>trace</b>
<b>_pf_route</b>(e28cb7e4,e28bc978,2,1fad,d0b8b120) at <b>_pf_route+0x263</b>
_pf_test(2,1f4ad,e28cb7e4,b4c1) at _pf_test+0x706
_pf_route(e28cbb00,e28bc978,2,d0a65440,d0b8b120) at _pf_route+0x207
_pf_test(2,d0a65440,e28cbb00,d023c282) at _pf_test+0x706
_ip_output(d0b6a200,0,0,0,0) at _ip_output+0xb67
_icmp_send(d0b6a200,0,1,a012) at _icmp_send+0x57
_icmp_reflect(d0b6a200,0,1,0,3) at _icmp_reflect+0x26b
_icmp_input(d0b6a200,14,0,0,d0b6a200) at _icmp_input+0x42c
_ipv4_input(d0b6a200,e289f140,d0a489e0,e289f140) at _ipv4_input+0x6eb
_ipintr(10,10,e289f140,e289f140,e28cbd38) at _ipintr+0x8d
Bad frame pointer: 0xe28cbcac
ddb&gt; 
</pre></blockquote>

This tells us what function calls lead to the crash.<p>

To find out the particular line of C code that caused the crash, you can
do the following:
<p>

Find the source file where the crashing function is defined in.
In this example, that would be pf_route() in sys/net/pf.c.
Recompile that source file with debug information:
<p>

<blockquote><pre>
# <b>cd /usr/src/sys/arch/$(uname -m)/compile/GENERIC</b>
# <b>rm pf.o</b>
# <b>DEBUG=-g make pf.o</b>
</pre></blockquote>
<p>

Then use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=objdump">
objdump(1)</a> to get the disassembly:
<p>

<blockquote><pre>
# <b>objdump --line --disassemble --reloc pf.o &gt;pf.dis</b>
</pre></blockquote>

In the output, grep for the function name (pf_route in our example):
<p>

<blockquote><pre>
# <b>grep "&lt;_pf_route&gt;:" pf.dis</b>
0000<b>7d88</b> &lt;_pf_route&gt;:
</pre></blockquote>

Take this first hex number and add the offset from the 'Stopped at' line:
<b>0x7d88</b> + <b>0x263</b> == <b>0x7feb</b>.<br>
Scroll down to that line
(the assembler instruction should match the one quoted in the 'Stopped at' line),
then up to the nearest C line number:
<p>

<blockquote><pre>
# <b>more pf.dis</b>
/usr/src/sys/arch/i386/compile/GENERIC/../../../../net/pf.c:<b>3872</b>
    7fe7:       0f b7 43 02             movzwl 0x2(%ebx),%eax
    <b>7feb</b>:       8b 57 40                mov    0x40(%edi),%edx
    7fee:       39 d0                   cmp    %edx,%eax
    7ff0:       0f 87 92 00 00 00       ja     8088 &lt;_pf_route+0x300&gt;
</pre></blockquote>

So, it's precisely line <b>3872</b> of pf.c that crashes:
<p>

<blockquote><pre>
# <b>cat -n pf.c | head -n 3872 | tail -n 1</b>
3872          if ((u_int16_t)ip-&gt;ip_len &lt;= ifp-&gt;if_mtu) {
</pre></blockquote>

Note that the kernel that produced the crash output and the object file
for objdump must be compiled from the exact same source file,
otherwise the offsets won't match.
<p>

If you provide both the ddb trace output and the relevant objdump section,
that's very helpful. 

<p>
<hr>
<p>
<a href="index.html">[FAQ Index]</a>
<a href="faq1.html">[To Section 1 - Introduction to OpenBSD]</a>
<a href="faq3.html">[To Section 3 - Getting started with OpenBSD]</a>
</body>
</html>
